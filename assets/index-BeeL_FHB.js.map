{"version":3,"file":"index-BeeL_FHB.js","sources":["../../src/layouts/components/SubSidebar/index.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { useSlots } from '@/slots'\nimport useMenuStore from '@/store/modules/menu'\nimport useSettingsStore from '@/store/modules/settings'\nimport Logo from '../Logo/index.vue'\nimport Menu from '../Menu/index.vue'\n\ndefineOptions({\n  name: 'SubSidebar',\n})\n\nconst route = useRoute()\n\nconst settingsStore = useSettingsStore()\nconst menuStore = useMenuStore()\n\nconst enableSidebar = computed(() => {\n  return settingsStore.mode === 'mobile' || (\n    ['side', 'head', 'single'].includes(settingsStore.settings.menu.mode)\n    && menuStore.sidebarMenus.length !== 0\n    && !menuStore.sidebarMenus.every(item => item.meta?.menu === false)\n  )\n})\n\nconst isCollapse = computed(() => {\n  if (settingsStore.mode === 'pc') {\n    if (settingsStore.settings.menu.subMenuCollapse && (!settingsStore.isHoverSidebar || (settingsStore.isHoverSidebar && !settingsStore.settings.menu.subMenuAutoCollapse))) {\n      return true\n    }\n    else {\n      return false\n    }\n  }\n  return settingsStore.settings.menu.subMenuCollapse\n})\n\nconst transitionName = ref('')\nwatch(() => menuStore.actived, (val, oldVal) => {\n  if (settingsStore.mode === 'mobile' || settingsStore.settings.menu.mode === 'side') {\n    if (val > oldVal) {\n      transitionName.value = 'sub-sidebar-y-start'\n    }\n    else {\n      transitionName.value = 'sub-sidebar-y-end'\n    }\n  }\n  else if (settingsStore.settings.menu.mode === 'head') {\n    if (val > oldVal) {\n      transitionName.value = 'sub-sidebar-x-start'\n    }\n    else {\n      transitionName.value = 'sub-sidebar-x-end'\n    }\n  }\n})\n</script>\n\n<template>\n  <Transition name=\"sub-sidebar\">\n    <div\n      v-if=\"enableSidebar\" class=\"sub-sidebar-container\" :class=\"{\n        'is-collapse': isCollapse,\n        'shadow-side': settingsStore.isHoverSidebar && settingsStore.settings.menu.subMenuAutoCollapse && settingsStore.settings.menu.subMenuCollapse,\n      }\"\n    >\n      <component :is=\"useSlots('sub-sidebar-top')\" />\n      <Logo\n        v-if=\"['side', 'single'].includes(settingsStore.settings.menu.mode)\" :show-logo=\"settingsStore.settings.menu.mode === 'single'\" class=\"sidebar-logo\" :class=\"{\n          single: settingsStore.settings.menu.mode === 'single',\n        }\"\n      />\n      <component :is=\"useSlots('sub-sidebar-after-logo')\" />\n      <FaScrollArea :scrollbar=\"false\" mask gradient-color=\"var(--g-sub-sidebar-bg)\" class=\"flex-1\">\n        <TransitionGroup :name=\"transitionName\">\n          <template v-for=\"(mainItem, mainIndex) in menuStore.allMenus\" :key=\"mainIndex\">\n            <div v-show=\"mainIndex === menuStore.actived\">\n              <Menu\n                :menu=\"mainItem.children\" :value=\"route.meta.activeMenu || route.path\" :default-openeds=\"menuStore.defaultOpenedPaths\" :always-openeds=\"menuStore.alwaysOpenedPaths\" :accordion=\"settingsStore.settings.menu.subMenuUniqueOpened\" :collapse=\"isCollapse\" :direction=\"settingsStore.settings.app.direction\" class=\"menu\" :class=\"{\n                  '-mt-2': !(isCollapse || ['head', 'single'].includes(settingsStore.settings.menu.mode)),\n                }\"\n              />\n            </div>\n          </template>\n        </TransitionGroup>\n      </FaScrollArea>\n      <div\n        v-if=\"settingsStore.mode === 'pc' && settingsStore.settings.menu.enableSubMenuCollapseButton\" class=\"relative flex items-center px-4 py-3\" :class=\"{\n          'justify-center': isCollapse,\n          'justify-between': !isCollapse,\n        }\"\n      >\n        <FaButton v-show=\"!isCollapse\" variant=\"secondary\" size=\"icon\" class=\"h-8 w-8\" @click=\"settingsStore.toggleSidebarAutoCollapse()\">\n          <FaIcon :name=\"settingsStore.settings.menu.subMenuAutoCollapse ? 'i-lucide:pin-off' : 'i-lucide:pin'\" class=\"size-4\" />\n        </FaButton>\n        <FaButton variant=\"secondary\" size=\"icon\" class=\"h-8 w-8 transition\" :class=\"{ '-rotate-z-180': settingsStore.settings.menu.subMenuCollapse }\" @click=\"settingsStore.toggleSidebarCollapse()\">\n          <FaIcon name=\"toolbar-collapse\" class=\"size-4\" />\n        </FaButton>\n      </div>\n      <component :is=\"useSlots('sub-sidebar-bottom')\" />\n    </div>\n  </Transition>\n</template>\n\n<style scoped>\n.sub-sidebar-container {\n  position: absolute;\n  inset-inline-start: 0;\n  top: 0;\n  bottom: 0;\n  display: flex;\n  flex-direction: column;\n  width: var(--g-sub-sidebar-width);\n  background-color: var(--g-sub-sidebar-bg);\n  box-shadow: -1px 0 0 0 hsl(var(--border)), 1px 0 0 0 hsl(var(--border));\n  transition: background-color 0.3s, inset-inline-start 0.3s, width 0.3s, box-shadow 0.3s;\n\n  &.is-collapse {\n    width: var(--g-sub-sidebar-collapse-width);\n\n    .sidebar-logo {\n      &:not(.single) {\n        display: none;\n      }\n\n      :deep(span) {\n        display: none;\n      }\n    }\n  }\n\n  &.shadow-side {\n    box-shadow: 10px 0 10px -10px hsl(var(--border)), -10px 0 10px -10px hsl(var(--border));\n  }\n\n  .menu {\n    width: 100%;\n  }\n}\n\n/* 次侧边栏动画 */\n.sub-sidebar-x-start-enter-active,\n.sub-sidebar-x-end-enter-active,\n.sub-sidebar-y-start-enter-active,\n.sub-sidebar-y-end-enter-active {\n  transition: 0.2s;\n}\n\n.sub-sidebar-x-start-enter-from,\n.sub-sidebar-x-start-leave-active {\n  opacity: 0;\n  transform: translateX(30px);\n}\n\n.sub-sidebar-x-end-enter-from,\n.sub-sidebar-x-end-leave-active {\n  opacity: 0;\n  transform: translateX(-30px);\n}\n\n.sub-sidebar-y-start-enter-from,\n.sub-sidebar-y-start-leave-active {\n  opacity: 0;\n  transform: translateY(30px);\n}\n\n.sub-sidebar-y-end-enter-from,\n.sub-sidebar-y-end-leave-active {\n  opacity: 0;\n  transform: translateY(-30px);\n}\n\n.sub-sidebar-x-start-leave-active,\n.sub-sidebar-x-end-leave-active,\n.sub-sidebar-y-start-leave-active,\n.sub-sidebar-y-end-leave-active {\n  position: absolute;\n}\n\n/* 次侧边栏动画 */\n.sub-sidebar-enter-active,\n.sub-sidebar-leave-active {\n  transition: 0.3s;\n}\n\n.sub-sidebar-enter-from,\n.sub-sidebar-leave-to {\n  transform: translateX(calc(var(--g-sub-sidebar-width) * -1));\n\n  [dir=\"rtl\"] & {\n    transform: translateX(var(--g-sub-sidebar-width));\n  }\n}\n</style>\n"],"names":["route","useRoute","settingsStore","useSettingsStore","menuStore","useMenuStore","enableSidebar","computed","item","_a","isCollapse","transitionName","ref","watch","val","oldVal"],"mappings":"ywBAWA,MAAMA,EAAQC,EAAS,EAEjBC,EAAgBC,EAAiB,EACjCC,EAAYC,EAAa,EAEzBC,EAAgBC,EAAS,IACtBL,EAAc,OAAS,UAC5B,CAAC,OAAQ,OAAQ,QAAQ,EAAE,SAASA,EAAc,SAAS,KAAK,IAAI,GACjEE,EAAU,aAAa,SAAW,GAClC,CAACA,EAAU,aAAa,MAAcI,GAAA,OAAA,QAAAC,EAAAD,EAAK,OAAL,YAAAC,EAAW,QAAS,GAAK,CAErE,EAEKC,EAAaH,EAAS,IACtBL,EAAc,OAAS,KACrB,GAAAA,EAAc,SAAS,KAAK,kBAAoB,CAACA,EAAc,gBAAmBA,EAAc,gBAAkB,CAACA,EAAc,SAAS,KAAK,sBAO9IA,EAAc,SAAS,KAAK,eACpC,EAEKS,EAAiBC,EAAI,EAAE,EAC7B,OAAAC,EAAM,IAAMT,EAAU,QAAS,CAACU,EAAKC,IAAW,CAC1Cb,EAAc,OAAS,UAAYA,EAAc,SAAS,KAAK,OAAS,OACtEY,EAAMC,EACRJ,EAAe,MAAQ,sBAGvBA,EAAe,MAAQ,oBAGlBT,EAAc,SAAS,KAAK,OAAS,SACxCY,EAAMC,EACRJ,EAAe,MAAQ,sBAGvBA,EAAe,MAAQ,oBAE3B,CACD"}