{"version":3,"file":"index.vue_vue_type_script_setup_true_lang-CJQGoh9c.js","sources":["../../src/utils/composables/useViewTransition.ts","../../src/layouts/components/Topbar/Toolbar/ColorScheme/index.vue"],"sourcesContent":["export default function useViewTransition(callback: () => void) {\n  function startViewTransition() {\n    if (!document.startViewTransition || window.matchMedia('(prefers-reduced-motion: reduce)').matches) {\n      callback()\n      return\n    }\n    return document.startViewTransition(async () => {\n      await Promise.resolve(callback())\n    })\n  }\n\n  return {\n    startViewTransition,\n  }\n}\n","<script setup lang=\"ts\">\nimport useSettingsStore from '@/store/modules/settings'\n\ndefineOptions({\n  name: 'ColorScheme',\n})\n\nconst settingsStore = useSettingsStore()\n\nfunction toggleColorScheme(event: MouseEvent) {\n  const { startViewTransition } = useViewTransition(() => {\n    settingsStore.currentColorScheme && settingsStore.setColorScheme(settingsStore.currentColorScheme === 'dark' ? 'light' : 'dark')\n  })\n  startViewTransition()?.ready.then(() => {\n    const x = event.clientX\n    const y = event.clientY\n    const endRadius = Math.hypot(\n      Math.max(x, innerWidth - x),\n      Math.max(y, innerHeight - y),\n    )\n    const clipPath = [\n      `circle(0px at ${x}px ${y}px)`,\n      `circle(${endRadius}px at ${x}px ${y}px)`,\n    ]\n    document.documentElement.animate(\n      {\n        clipPath: settingsStore.settings.app.colorScheme !== 'dark' ? clipPath : clipPath.reverse(),\n      },\n      {\n        duration: 300,\n        easing: 'ease-out',\n        pseudoElement: settingsStore.settings.app.colorScheme !== 'dark' ? '::view-transition-new(root)' : '::view-transition-old(root)',\n      },\n    )\n  })\n}\n</script>\n\n<template>\n  <FaButton variant=\"ghost\" size=\"icon\" class=\"w-auto px-2\" @click=\"toggleColorScheme\">\n    <FaIcon\n      :name=\"{\n        light: 'i-ri:sun-line',\n        dark: 'i-ri:moon-line',\n      }[settingsStore.currentColorScheme!]\" class=\"size-4\"\n    />\n    {{ {\n      light: '白天',\n      dark: '夜间',\n    }[settingsStore.currentColorScheme!] }}\n  </FaButton>\n</template>\n"],"names":["useViewTransition","callback","startViewTransition","settingsStore","useSettingsStore","toggleColorScheme","event","_a","x","y","endRadius","clipPath"],"mappings":"+GAAA,SAAwBA,EAAkBC,EAAsB,CAC9D,SAASC,GAAsB,CAC7B,GAAI,CAAC,SAAS,qBAAuB,OAAO,WAAW,kCAAkC,EAAE,QAAS,CACzFD,EAAA,EACT,MAAA,CAEK,OAAA,SAAS,oBAAoB,SAAY,CACxC,MAAA,QAAQ,QAAQA,GAAU,CAAA,CACjC,CAAA,CAGI,MAAA,CACL,oBAAAC,CACF,CACF,uDCPA,MAAMC,EAAgBC,EAAiB,EAEvC,SAASC,EAAkBC,EAAmB,OAC5C,KAAM,CAAE,oBAAAJ,GAAwBF,EAAkB,IAAM,CACtDG,EAAc,oBAAsBA,EAAc,eAAeA,EAAc,qBAAuB,OAAS,QAAU,MAAM,CAAA,CAChI,GACmBI,EAAAL,EAAA,IAAA,MAAAK,EAAG,MAAM,KAAK,IAAM,CACtC,MAAMC,EAAIF,EAAM,QACVG,EAAIH,EAAM,QACVI,EAAY,KAAK,MACrB,KAAK,IAAIF,EAAG,WAAaA,CAAC,EAC1B,KAAK,IAAIC,EAAG,YAAcA,CAAC,CAC7B,EACME,EAAW,CACf,iBAAiBH,CAAC,MAAMC,CAAC,MACzB,UAAUC,CAAS,SAASF,CAAC,MAAMC,CAAC,KACtC,EACA,SAAS,gBAAgB,QACvB,CACE,SAAUN,EAAc,SAAS,IAAI,cAAgB,OAASQ,EAAWA,EAAS,QAAQ,CAC5F,EACA,CACE,SAAU,IACV,OAAQ,WACR,cAAeR,EAAc,SAAS,IAAI,cAAgB,OAAS,8BAAgC,6BAAA,CAEvG,CAAA,EACD"}