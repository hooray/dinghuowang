{"version":3,"file":"index-ezfhI-re.js","sources":["../../src/layouts/components/Header/index.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { useSlots } from '@/slots'\nimport useMenuStore from '@/store/modules/menu'\nimport useSettingsStore from '@/store/modules/settings'\nimport Logo from '../Logo/index.vue'\nimport Menu from '../Menu/index.vue'\nimport MenuPanel from '../MenuPanel/index.vue'\nimport ToolbarRightSide from '../Topbar/Toolbar/rightSide.vue'\n\ndefineOptions({\n  name: 'LayoutHeader',\n})\n\nconst route = useRoute()\n\nconst settingsStore = useSettingsStore()\nconst menuStore = useMenuStore()\n\nconst { generateI18nTitle, switchTo } = useMenu()\n\nfunction iconName(isActive: boolean, icon?: string, activeIcon?: string) {\n  let name\n  if ((!isActive && icon) || (isActive && !activeIcon)) {\n    name = icon\n  }\n  else if (isActive && activeIcon) {\n    name = activeIcon\n  }\n  return name\n}\n</script>\n\n<template>\n  <Transition name=\"header\">\n    <header v-if=\"settingsStore.mode === 'pc' && ['head', 'only-head', 'head-panel'].includes(settingsStore.settings.menu.mode)\">\n      <component :is=\"useSlots('header-start')\" />\n      <div class=\"header-container\">\n        <Logo class=\"title\" />\n        <component :is=\"useSlots('header-after-logo')\" />\n        <FaScrollArea :scrollbar=\"false\" mask horizontal gradient-color=\"var(--g-header-bg)\" class=\"menu-container h-full flex-1\">\n          <!-- 顶部模式 -->\n          <div\n            v-if=\"settingsStore.settings.menu.mode === 'head'\" class=\"menu h-full flex of-hidden transition-all\" :class=\"{\n              [`menu-active-${settingsStore.settings.menu.style}`]: settingsStore.settings.menu.style !== '',\n            }\"\n          >\n            <template v-for=\"(item, index) in menuStore.allMenus\" :key=\"index\">\n              <div\n                class=\"menu-item relative mx-1 py-2 transition-all\" :class=\"{\n                  active: index === menuStore.actived,\n                }\"\n              >\n                <div\n                  v-if=\"item.children && item.children.length !== 0\" class=\"group menu-item-container relative h-full w-full flex cursor-pointer items-center justify-between gap-1 rounded-lg px-3 text-[var(--g-header-menu-color)] transition-all hover-bg-[var(--g-header-menu-hover-bg)] hover-text-[var(--g-header-menu-hover-color)]\" :class=\"{\n                    'text-[var(--g-header-menu-active-color)]! bg-[var(--g-header-menu-active-bg)]!': index === menuStore.actived,\n                  }\" :title=\"generateI18nTitle(item.meta?.title)\" @click=\"switchTo(index)\"\n                >\n                  <div class=\"inline-flex flex-1 items-center justify-center gap-1\">\n                    <FaIcon v-if=\"iconName(index === menuStore.actived, item.meta?.icon, item.meta?.activeIcon)\" :name=\"iconName(index === menuStore.actived, item.meta?.icon, item.meta?.activeIcon)!\" class=\"menu-item-container-icon transition-transform group-hover-scale-120\" />\n                    <span class=\"w-full flex-1 truncate text-sm transition-height transition-opacity transition-width\">\n                      {{ generateI18nTitle(item.meta?.title) }}\n                    </span>\n                  </div>\n                  <FaBadge v-if=\"item.meta?.badge\" :value=\"typeof item.meta.badge === 'function' ? item.meta.badge() : item.meta.badge\" :variant=\"typeof item.meta.badgeVariant === 'function' ? item.meta.badgeVariant() : item.meta.badgeVariant\" class=\"absolute inset-e-2 inset-t-2\" />\n                </div>\n              </div>\n            </template>\n          </div>\n          <!-- 顶部精简模式 -->\n          <Menu\n            v-else-if=\"settingsStore.settings.menu.mode === 'only-head'\" :menu=\"menuStore.allMenus\" :value=\"route.meta.activeMenu || route.path\" mode=\"horizontal\" show-collapse-name collapse :direction=\"settingsStore.settings.app.direction\" class=\"menu\" :class=\"{\n              [`menu-active-${settingsStore.settings.menu.style}`]: settingsStore.settings.menu.style !== '',\n            }\"\n          />\n          <!-- 顶部面板模式 -->\n          <MenuPanel\n            v-else-if=\"settingsStore.settings.menu.mode === 'head-panel'\" :menu=\"menuStore.allMenus\" :value=\"route.meta.activeMenu || route.path\" mode=\"horizontal\" show-collapse-name collapse :direction=\"settingsStore.settings.app.direction\" class=\"menu\" :class=\"{\n              [`menu-active-${settingsStore.settings.menu.style}`]: settingsStore.settings.menu.style !== '',\n            }\"\n          />\n        </FaScrollArea>\n        <ToolbarRightSide />\n      </div>\n      <component :is=\"useSlots('header-end')\" />\n    </header>\n  </Transition>\n</template>\n\n<style scoped>\n[data-app-width-mode=\"center\"],\n[data-app-width-mode=\"center-max-width\"] {\n  header {\n    width: var(--g-app-width);\n    max-width: 100%;\n    padding-right: initial;\n  }\n}\n\nheader {\n  position: fixed;\n  top: 0;\n  right: var(--scrollbar-width, 0);\n  left: 0;\n  z-index: 2000;\n  display: flex;\n  align-items: center;\n  width: calc(100% - var(--scrollbar-width, 0px));\n  height: var(--g-header-height);\n  margin: 0 auto;\n  color: var(--g-header-color);\n  background-color: var(--g-header-bg);\n  box-shadow: -1px 0 0 0 hsl(var(--border)), 1px 0 0 0 hsl(var(--border)), 0 1px 0 0 hsl(var(--border));\n  transition: background-color 0.3s;\n\n  .header-container {\n    display: flex;\n    gap: 30px;\n    align-items: center;\n    justify-content: space-between;\n    width: 100%;\n    max-width: var(--g-header-width);\n    height: 100%;\n    padding: 0 12px 0 20px;\n    margin: 0 auto;\n\n    :deep(a.title) {\n      position: relative;\n      flex: 0;\n      width: inherit;\n      height: inherit;\n      padding: 0;\n      background-color: inherit;\n\n      .logo {\n        width: initial;\n        max-width: initial;\n        height: min(70%, 50px);\n      }\n\n      span {\n        padding-left: 8px;\n        font-size: 16px;\n        color: var(--g-header-color);\n        letter-spacing: 1px;\n        border-left: 2px solid hsl(var(--border));\n      }\n    }\n\n    .menu-container {\n      .menu-active {\n        &-arrow {\n          .item-container::before,\n          :deep(.menu-item::before) {\n            position: absolute;\n            bottom: 0;\n            left: 50%;\n            z-index: 1;\n            width: 0;\n            height: 0;\n            content: \"\";\n            border-right: 5px solid transparent;\n            border-bottom: 5px solid var(--g-header-bg);\n            border-left: 5px solid transparent;\n            opacity: 0;\n            transform: translateX(-50%);\n            transition: all 0.3s;\n          }\n\n          .item-container.active::before,\n          :deep(.menu-item.active::before) {\n            bottom: 8px;\n            opacity: 1;\n          }\n        }\n\n        &-line {\n          .item-container::before,\n          :deep(.menu-item::before) {\n            position: absolute;\n            bottom: 6px;\n            left: 50%;\n            z-index: 1;\n            width: 0;\n            height: 4px;\n            content: \"\";\n            background-color: var(--g-header-menu-active-bg);\n            border-radius: 2px;\n            box-shadow: 0 0 0 1px var(--g-header-bg);\n            opacity: 0;\n            transform: translateX(-50%);\n            transition: all 0.3s;\n          }\n\n          .item-container.active::before,\n          :deep(.menu-item.active::before) {\n            width: 20px;\n            opacity: 1;\n          }\n        }\n\n        &-dot {\n          .item-container::before,\n          :deep(.menu-item::before) {\n            position: absolute;\n            bottom: 0;\n            left: 50%;\n            z-index: 1;\n            width: 10px;\n            height: 10px;\n            content: \"\";\n            background-color: var(--g-header-menu-active-bg);\n            border-radius: 50%;\n            box-shadow: 0 0 0 1px var(--g-main-sidebar-bg);\n            opacity: 0;\n            transform: translateX(-50%);\n            transition: all 0.3s;\n          }\n\n          .item-container.active::before,\n          :deep(.menu-item.active::before) {\n            bottom: 4px;\n            opacity: 1;\n          }\n        }\n      }\n\n      .menu {\n        display: inline-flex;\n\n        :deep(.menu-item) {\n          .menu-item-container {\n            color: var(--g-header-menu-color);\n\n            &:hover {\n              color: var(--g-header-menu-hover-color);\n              background-color: var(--g-header-menu-hover-bg);\n            }\n\n            .menu-item-container-icon {\n              font-size: 20px !important;\n            }\n\n            .badge {\n              position: absolute;\n              inset-inline-end: 0;\n              top: 0.5rem;\n              display: inline-flex;\n              transform: scale(1);\n            }\n          }\n\n          &.active .menu-item-container {\n            color: var(--g-header-menu-active-color) !important;\n            background-color: var(--g-header-menu-active-bg) !important;\n          }\n        }\n      }\n    }\n  }\n}\n\n/* 头部动画 */\n.header-enter-active,\n.header-leave-active {\n  transition: transform 0.3s;\n}\n\n.header-enter-from,\n.header-leave-to {\n  transform: translateY(calc(var(--g-header-height) * -1));\n}\n</style>\n"],"names":["route","useRoute","settingsStore","useSettingsStore","menuStore","useMenuStore","generateI18nTitle","switchTo","useMenu","iconName","isActive","icon","activeIcon","name"],"mappings":"+mEAaA,MAAMA,EAAQC,EAAS,EAEjBC,EAAgBC,EAAiB,EACjCC,EAAYC,EAAa,EAEzB,CAAE,kBAAAC,EAAmB,SAAAC,CAAS,EAAIC,EAAQ,EAEvC,SAAAC,EAASC,EAAmBC,EAAeC,EAAqB,CACnE,IAAAC,EACJ,MAAK,CAACH,GAAYC,GAAUD,GAAY,CAACE,EAChCC,EAAAF,EAEAD,GAAYE,IACZC,EAAAD,GAEFC,CAAA"}