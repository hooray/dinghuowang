
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{_ as G}from"./index.vue_vue_type_script_setup_true_lang-DGOpLTW2.js";import{d as H,a1 as J,a2 as Q,a6 as W,l as X,aq as ee,p as S,ak as M,Y as y,c as D,i as d,o as r,b as a,u as s,B as V,w as l,L as te,P as se,k as x,Z as P,z as ae,bq as oe,a as A,a3 as R,ar as ie,O as U,$ as ne,K as le,A as re,bo as C,aa as q,a4 as ce}from"./index-CdccOLXW.js";import{_ as de}from"./index.vue_vue_type_script_setup_true_lang-DeTnvToU.js";import{m as ue}from"./index-RKlUGH8s.js";import{S as fe}from"./sortable.esm-C83syoBY.js";import{u as be}from"./useTabbar--554fpAD.js";const pe={class:"max-h-[320px] w-[200px] flex flex-col"},he={class:"flex-center-between gap-2 p-4"},_e=["placeholder"],me=["title","onClick"],ve=["onClick"],ge=["onClick"],K=H({name:"TabbarMoreAction",__name:"moreAction",setup(z){const b=J(),_=Q(),w=W(),c=be(),{t:p}=X(),{generateI18nTitle:m}=ee(),v=S(!1),h=S(!1),u=S(""),L=M("searchInputRef");y(()=>h.value,o=>{o?q(()=>{var e;(e=L.value)==null||e.focus()}):u.value=""});const $=D(()=>{let o=[];return o=w.list.filter(e=>{var n;let i=!1;return(m(e.title).toString().includes(u.value)||(((n=ue(m(e.title).toString(),u.value,{continuous:!0}))==null?void 0:n.length)??0)>0)&&(i=!0),i}),o}),T=D(()=>c.getId()),B=M("dropdownTabContainerRef"),I=S(!1);let g;y(()=>B.value,o=>{o?(g=new fe(o,{animation:200,ghostClass:"opacity-0",draggable:".tab",onStart:()=>{I.value=!0},onEnd:()=>{I.value=!1},onMove:e=>e.dragged.classList.contains("pinned")?e.related.classList.contains("pinned"):!e.related.classList.contains("pinned"),onUpdate:e=>{e.newIndex!==void 0&&e.oldIndex!==void 0&&w.sort(e.newIndex,e.oldIndex)}}),_.mode==="mobile"&&g.option("disabled",!0)):g.destroy()}),y(()=>h.value,o=>{q(()=>{g.option("disabled",o)})});function N(o,e,i){let n;return!o&&e||o&&!i?n=e:o&&i&&(n=i),n}function Y(o){b.push(o),v.value=!1}return(o,e)=>{const i=se,n=te,k=de,Z=ie,j=G;return r(),d("div",null,[a(j,{open:s(v),"onUpdate:open":e[8]||(e[8]=t=>V(v)?v.value=t:null),class:"min-w-auto p-0",align:"end"},{panel:l(()=>[x("div",pe,[x("div",he,[s(h)?(r(),d(P,{key:0},[ae(x("input",{ref_key:"searchInputRef",ref:L,"onUpdate:modelValue":e[0]||(e[0]=t=>V(u)?u.value=t:null),placeholder:s(p)("searchPlaceholder"),class:"h-8 w-0 flex-1 border border-input rounded-md bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus-visible:outline-none"},null,8,_e),[[oe,s(u)]]),a(n,{variant:"outline",size:"icon",class:"h-8 w-8",onClick:e[1]||(e[1]=t=>h.value=!1)},{default:l(()=>[a(i,{name:"i-ri:close-fill",class:"size-4"})]),_:1})],64)):(r(),d(P,{key:1},[a(k,{text:s(p)("searchTabs")},{default:l(()=>[s(_).settings.toolbar.navSearch?(r(),A(n,{key:0,variant:"secondary",size:"icon",class:"h-8 w-8",onClick:e[2]||(e[2]=t=>h.value=!0)},{default:l(()=>[a(i,{name:"i-ri:search-line",class:"size-4"})]),_:1})):R("",!0)]),_:1},8,["text"]),a(k,{text:s(p)("closeOtherSide")},{default:l(()=>[a(n,{variant:"secondary",size:"icon",class:"h-8 w-8",disabled:!s(c).checkCloseOtherSide(),onClick:e[3]||(e[3]=t=>s(c).closeOtherSide())},{default:l(()=>[a(i,{name:"i-ri:close-fill",class:"size-4"})]),_:1},8,["disabled"])]),_:1},8,["text"]),a(k,{text:s(p)("closeLeftSide")},{default:l(()=>[a(n,{variant:"secondary",size:"icon",class:"h-8 w-8",disabled:!s(c).checkCloseLeftSide(),onClick:e[4]||(e[4]=t=>s(c).closeLeftSide())},{default:l(()=>[a(i,{name:"i-ph:arrow-line-left",class:"size-4"})]),_:1},8,["disabled"])]),_:1},8,["text"]),a(k,{text:s(p)("closeRightSide")},{default:l(()=>[a(n,{variant:"secondary",size:"icon",class:"h-8 w-8",disabled:!s(c).checkCloseRightSide(),onClick:e[5]||(e[5]=t=>s(c).closeRightSide())},{default:l(()=>[a(i,{name:"i-ph:arrow-line-right",class:"size-4"})]),_:1},8,["disabled"])]),_:1},8,["text"])],64))]),a(Z,{scrollbar:!1,mask:"","gradient-color":"hsl(var(--popover))",class:"mb-4 flex-1 -mt-2"},{default:l(()=>[x("div",{ref_key:"dropdownTabContainerRef",ref:B,class:U(["tabs space-y-1",{dragging:s(I)}])},[(r(!0),d(P,null,ne(s($),t=>{var O,F;return r(),d("div",{key:s(_).settings.tabbar.mergeTabsBy==="routeName"&&t.routeName?t.routeName:t.tabId,class:U(["relative mx-4 h-8 rounded-md px-2 tab",{"bg-accent":t.tabId===s(T),pinned:t.isPermanent||t.isPin}])},[(r(),d("div",{key:t.tabId,class:"title",title:((O=t.customTitleList.find(f=>f.fullPath===t.fullPath))==null?void 0:O.title)||s(m)(t.title),onClick:f=>Y(t.fullPath)},[s(_).settings.tabbar.enableIcon&&N(t.tabId===s(T),t.icon,t.activeIcon)?(r(),A(i,{key:0,name:N(t.tabId===s(T),t.icon,t.activeIcon)},null,8,["name"])):R("",!0),le(" "+re(((F=t.customTitleList.find(f=>f.fullPath===t.fullPath))==null?void 0:F.title)||s(m)(t.title)),1)],8,me)),!t.isPermanent&&t.isPin?(r(),d("div",{key:0,class:"action-icon",onClick:C(f=>s(w).unPin(t.tabId),["stop"]),onDblclick:e[6]||(e[6]=C(()=>{},["stop"]))},[a(i,{name:"i-ri:pushpin-2-fill"})],40,ve)):!t.isPermanent&&s($).length>1?(r(),d("div",{key:1,class:"action-icon",onClick:C(f=>s(c).closeById(t.tabId),["stop"]),onDblclick:e[7]||(e[7]=C(()=>{},["stop"]))},[a(i,{name:"i-ri:close-fill"})],40,ge)):R("",!0)],2)}),128))],2)]),_:1})])]),default:l(()=>[a(n,{variant:"outline",size:"icon",class:"h-7 w-7"},{default:l(()=>[a(i,{name:"i-ep:caret-bottom"})]),_:1})]),_:1},8,["open"])])}}});function E(z){const b=z;b.__i18n=b.__i18n||[],b.__i18n.push({locale:"",resource:{"zh-cn":{searchPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"搜索..."}},searchTabs:{t:0,b:{t:2,i:[{t:3}],s:"搜索标签页"}},closeOtherSide:{t:0,b:{t:2,i:[{t:3}],s:"关闭其它标签页"}},closeLeftSide:{t:0,b:{t:2,i:[{t:3}],s:"关闭左侧标签页"}},closeRightSide:{t:0,b:{t:2,i:[{t:3}],s:"关闭右侧标签页"}}},"zh-tw":{searchPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"搜索..."}},searchTabs:{t:0,b:{t:2,i:[{t:3}],s:"搜索標籤頁"}},closeOtherSide:{t:0,b:{t:2,i:[{t:3}],s:"關閉其它標籤頁"}},closeLeftSide:{t:0,b:{t:2,i:[{t:3}],s:"關閉左側標籤頁"}},closeRightSide:{t:0,b:{t:2,i:[{t:3}],s:"關閉右側標籤頁"}}},en:{searchPlaceholder:{t:0,b:{t:2,i:[{t:3}],s:"Search..."}},searchTabs:{t:0,b:{t:2,i:[{t:3}],s:"Search Tabs"}},closeOtherSide:{t:0,b:{t:2,i:[{t:3}],s:"Close Otherside Tabs"}},closeLeftSide:{t:0,b:{t:2,i:[{t:3}],s:"Close Leftside Tabs"}},closeRightSide:{t:0,b:{t:2,i:[{t:3}],s:"Close Rightside Tabs"}}}}})}typeof E=="function"&&E(K);const Ie=ce(K,[["__scopeId","data-v-ae10dd5f"]]);export{Ie as default};
//# sourceMappingURL=moreAction-BRdRgRxn.js.map
