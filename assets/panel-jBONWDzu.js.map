{"version":3,"file":"panel-jBONWDzu.js","sources":["../../src/layouts/components/Topbar/Toolbar/Favorites/panel.vue"],"sourcesContent":["<i18n lang=\"yaml\">\nzh-cn:\n  title: 我的收藏夹\n  add: 添加到收藏夹\n  remove: 从收藏夹删除\n  empty: 收藏夹是空的\n  addToFavorites: 点击右上角\n  addCurrentPage: 将当前页面添加到收藏夹\nzh-tw:\n  title: 我的收藏夾\n  add: 添加到收藏夾\n  remove: 從收藏夾刪除\n  empty: 收藏夾是空的\n  addToFavorites: 點擊右上角\n  addCurrentPage: 將當前頁面添加到收藏夾\nen:\n  title: My Favorites\n  add: Add to Favorites\n  remove: Remove from Favorites\n  empty: Favorites is empty\n  addToFavorites: Click the upper right corner\n  addCurrentPage: Add the current page to Favorites\n</i18n>\n\n<script setup lang=\"ts\">\nimport useFavoritesStore from '@/store/modules/favorites'\nimport Sortable from 'sortablejs'\nimport { useI18n } from 'vue-i18n'\n\ndefineOptions({\n  name: 'FavoritesPanel',\n})\n\nconst emits = defineEmits<{\n  onChoose: []\n}>()\n\nconst { t } = useI18n()\nconst route = useRoute()\nconst router = useRouter()\nconst favoritesStore = useFavoritesStore()\n\nconst { generateI18nTitle } = useMenu()\n\nconst favoritesContainerRef = useTemplateRef('favoritesContainerRef')\n\nwatch(() => favoritesContainerRef.value, (val) => {\n  if (val) {\n    // eslint-disable-next-line no-new\n    new Sortable(val, {\n      animation: 200,\n      ghostClass: 'op-0',\n      draggable: '.draggable-item',\n      onUpdate: (e) => {\n        if (e.newIndex !== undefined && e.oldIndex !== undefined) {\n          favoritesStore.sort(e.newIndex, e.oldIndex)\n        }\n      },\n    })\n  }\n})\n\nfunction handleChoose(fullPath: string) {\n  router.push(fullPath)\n  emits('onChoose')\n}\n</script>\n\n<template>\n  <div class=\"favorites-container w-80\">\n    <div class=\"flex items-center justify-between px-4 py-3\">\n      <div class=\"text-sm font-bold\">\n        {{ t('title') }}\n      </div>\n      <template v-if=\"favoritesStore.canAdd(route.fullPath)\">\n        <FaIcon v-if=\"!favoritesStore.isAdd(route.fullPath)\" class=\"cursor-pointer text-xl\" name=\"i-mdi:star-plus-outline\" :title=\"t('add')\" @click=\"favoritesStore.add(route)\" />\n        <FaIcon v-else class=\"cursor-pointer text-xl\" name=\"i-mdi:star-remove\" :title=\"t('remove')\" @click=\"favoritesStore.remove(route.fullPath)\" />\n      </template>\n    </div>\n    <FaScrollArea class=\"max-h-220px\">\n      <div v-if=\"favoritesStore.list.length > 0\" ref=\"favoritesContainerRef\" class=\"flex flex-wrap items-center justify-between gap-2 px-4 pb-4\">\n        <div v-for=\"item in favoritesStore.list\" :key=\"item.fullPath\" :title=\"generateI18nTitle(item.title)\" class=\"group draggable-item relative w-[calc(50%-0.25rem)] flex cursor-pointer items-center gap-1 rounded-lg px-2 py-2 ring-1 ring-border ring-inset hover-bg-accent\" @click=\"handleChoose(item.fullPath)\">\n          <FaIcon v-if=\"item.icon\" :name=\"item.icon\" class=\"size-4\" />\n          <div class=\"flex-1 truncate pe-4 text-sm group-hover:[mask-image:linear-gradient(90deg,#000_calc(100%-80px),transparent)]\">\n            {{ generateI18nTitle(item.title) }}\n          </div>\n          <div class=\"absolute right-2 h-5 w-5 rounded-full text-secondary-foreground hidden group-hover:flex-center hover:bg-secondary hover:ring-1\">\n            <FaIcon name=\"i-ep:delete\" class=\"size-3\" @click.stop=\"favoritesStore.remove(item.fullPath)\" />\n          </div>\n        </div>\n      </div>\n      <div v-else class=\"flex-col-center py-6 text-secondary-foreground\">\n        <FaIcon name=\"i-tabler:mood-empty\" class=\"size-10\" />\n        <p class=\"m-2 text-base\">\n          {{ t('empty') }}\n        </p>\n        <p v-show=\"favoritesStore.canAdd(route.fullPath)\" class=\"m-0 flex-center text-sm op-75\">\n          {{ t('addToFavorites') }}\n          <FaIcon name=\"i-mdi:star-plus-outline\" class=\"mx-1 size-5 text-secondary-foreground\" />\n          {{ t('addCurrentPage') }}\n        </p>\n      </div>\n    </FaScrollArea>\n  </div>\n</template>\n"],"names":["emits","__emit","t","useI18n","route","useRoute","router","useRouter","favoritesStore","useFavoritesStore","generateI18nTitle","useMenu","favoritesContainerRef","useTemplateRef","watch","val","Sortable","e","handleChoose","fullPath"],"mappings":"u3BAiCA,MAAMA,EAAQC,EAIR,CAAE,EAAAC,CAAE,EAAIC,EAAQ,EAChBC,EAAQC,EAAS,EACjBC,EAASC,EAAU,EACnBC,EAAiBC,EAAkB,EAEnC,CAAE,kBAAAC,CAAkB,EAAIC,EAAQ,EAEhCC,EAAwBC,EAAe,uBAAuB,EAEpEC,EAAM,IAAMF,EAAsB,MAAQG,GAAQ,CAC5CA,GAEF,IAAIC,EAASD,EAAK,CAChB,UAAW,IACX,WAAY,OACZ,UAAW,kBACX,SAAWE,GAAM,CACXA,EAAE,WAAa,QAAaA,EAAE,WAAa,QAC7CT,EAAe,KAAKS,EAAE,SAAUA,EAAE,QAAQ,CAC5C,CACF,CACD,CACH,CACD,EAED,SAASC,EAAaC,EAAkB,CACtCb,EAAO,KAAKa,CAAQ,EACpBnB,EAAM,UAAU,CAAA"}