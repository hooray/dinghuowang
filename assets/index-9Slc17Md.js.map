{"version":3,"file":"index-9Slc17Md.js","sources":["../../src/ui/components/FaAvatar/avatar/Avatar.vue","../../src/ui/components/FaAvatar/avatar/AvatarFallback.vue","../../src/ui/components/FaAvatar/avatar/AvatarImage.vue","../../src/ui/components/FaAvatar/avatar/index.ts","../../src/ui/components/FaAvatar/index.vue","../../src/components/AccountForm/EditPasswordForm.vue","../../src/slots/ToolbarEnd/profile.vue","../../src/slots/ToolbarEnd/index.vue","../../src/slots/index.ts"],"sourcesContent":["<script setup lang=\"ts\">\nimport type { HTMLAttributes } from 'vue'\nimport type { AvatarVariants } from '.'\nimport { cn } from '@/utils'\nimport { AvatarRoot } from 'radix-vue'\nimport { avatarVariant } from '.'\n\nconst props = withDefaults(defineProps<{\n  class?: HTMLAttributes['class']\n  size?: AvatarVariants['size']\n  shape?: AvatarVariants['shape']\n}>(), {\n  size: 'sm',\n  shape: 'circle',\n})\n</script>\n\n<template>\n  <AvatarRoot :class=\"cn(avatarVariant({ size, shape }), props.class)\">\n    <slot />\n  </AvatarRoot>\n</template>\n","<script setup lang=\"ts\">\nimport type { AvatarFallbackProps } from 'radix-vue'\nimport { AvatarFallback } from 'radix-vue'\n\nconst props = defineProps<AvatarFallbackProps>()\n</script>\n\n<template>\n  <AvatarFallback v-bind=\"props\">\n    <slot />\n  </AvatarFallback>\n</template>\n","<script setup lang=\"ts\">\nimport type { AvatarImageProps } from 'radix-vue'\nimport { AvatarImage } from 'radix-vue'\n\nconst props = defineProps<AvatarImageProps>()\n</script>\n\n<template>\n  <AvatarImage v-bind=\"props\" class=\"h-full w-full object-cover\" />\n</template>\n","import type { VariantProps } from 'class-variance-authority'\nimport { cva } from 'class-variance-authority'\n\nexport { default as Avatar } from './Avatar.vue'\nexport { default as AvatarFallback } from './AvatarFallback.vue'\nexport { default as AvatarImage } from './AvatarImage.vue'\n\nexport const avatarVariant = cva(\n  'inline-flex items-center justify-center font-normal text-foreground select-none shrink-0 bg-secondary overflow-hidden',\n  {\n    variants: {\n      size: {\n        sm: 'h-10 w-10 text-xs',\n        base: 'h-16 w-16 text-2xl',\n        lg: 'h-32 w-32 text-5xl',\n      },\n      shape: {\n        circle: 'rounded-full',\n        square: 'rounded-md',\n      },\n    },\n  },\n)\n\nexport type AvatarVariants = VariantProps<typeof avatarVariant>\n","<script setup lang=\"ts\">\nimport type { HTMLAttributes } from 'vue'\nimport type { AvatarVariants } from './avatar'\nimport { Avatar, AvatarFallback, AvatarImage } from './avatar'\n\nconst props = defineProps<{\n  src: string\n  fallback?: string\n  shape?: AvatarVariants['shape']\n  class?: HTMLAttributes['class']\n}>()\n</script>\n\n<template>\n  <Avatar :shape :class=\"props.class\">\n    <AvatarImage :src=\"src\" />\n    <AvatarFallback class=\"inline-flex\">\n      <slot>\n        {{ fallback }}\n      </slot>\n    </AvatarFallback>\n  </Avatar>\n</template>\n","<i18n lang=\"json\">\n{\n  \"zh-cn\": {\n    \"intro\": \"修改密码\",\n    \"subIntro\": \"请输入原密码、新密码和确认密码\",\n    \"form\": {\n      \"password\": \"原密码\",\n      \"newPassword\": \"新密码\",\n      \"checkPassword\": \"确认密码\",\n      \"save\": \"保存\"\n    },\n    \"rules\": {\n      \"password\": \"请输入原密码\",\n      \"newPassword\": \"请输入新密码\",\n      \"passwordLength\": \"密码长度为6到18位\",\n      \"checkPassword\": \"请确认新密码\",\n      \"checkPasswordError\": \"两次输入的密码不一致\"\n    }\n  },\n  \"zh-tw\": {\n    \"intro\": \"修改密碼\",\n    \"subIntro\": \"請輸入原密碼、新密碼和確認密碼\",\n    \"form\": {\n      \"password\": \"原密碼\",\n      \"newPassword\": \"新密碼\",\n      \"checkPassword\": \"確認新密碼\",\n      \"save\": \"保存\"\n    },\n    \"rules\": {\n      \"password\": \"請輸入原密碼\",\n      \"newPassword\": \"請輸入新密碼\",\n      \"passwordLength\": \"密碼長度為6到18位\",\n      \"checkPassword\": \"請確認新密碼\",\n      \"checkPasswordError\": \"兩次輸入的密碼不一致\"\n    }\n  },\n  \"en\": {\n    \"intro\": \"Modify Password\",\n    \"subIntro\": \"Please enter the original password, new password and confirm password\",\n    \"form\": {\n      \"password\": \"Original Password\",\n      \"newPassword\": \"New Password\",\n      \"checkPassword\": \"Confirm New Password\",\n      \"save\": \"Save\"\n    },\n    \"rules\": {\n      \"password\": \"Please enter the original password\",\n      \"newPassword\": \"Please enter the new password\",\n      \"passwordLength\": \"Password length is 6 to 18 characters\",\n      \"checkPassword\": \"Please confirm the new password\",\n      \"checkPasswordError\": \"The two passwords do not match\"\n    }\n  }\n}\n</i18n>\n\n<script setup lang=\"ts\">\nimport useUserStore from '@/store/modules/user'\nimport { FormControl, FormField, FormItem, FormMessage } from '@/ui/shadcn/ui/form'\nimport { toTypedSchema } from '@vee-validate/zod'\nimport { useForm } from 'vee-validate'\nimport { useI18n } from 'vue-i18n'\nimport { toast } from 'vue-sonner'\nimport * as z from 'zod'\n\ndefineOptions({\n  name: 'EditPasswordForm',\n})\n\nconst { t } = useI18n()\nconst userStore = useUserStore()\n\nconst loading = ref(false)\n\nconst form = useForm({\n  validationSchema: toTypedSchema(\n    z.object({\n      password: z.string().min(1, t('rules.password')),\n      newPassword: z.string().min(1, t('rules.newPassword')).min(6, t('rules.passwordLength')).max(18, t('rules.passwordLength')),\n      checkPassword: z.string().min(1, t('rules.checkPassword')),\n    }).refine(data => data.newPassword === data.checkPassword, {\n      message: t('rules.checkPasswordError'),\n      path: ['checkPassword'],\n    }),\n  ),\n  initialValues: {\n    password: '',\n    newPassword: '',\n    checkPassword: '',\n  },\n})\nconst onSubmit = form.handleSubmit((values) => {\n  loading.value = true\n  userStore.editPassword(values).then(async () => {\n    toast.success('模拟修改成功，请重新登录')\n    userStore.logout()\n  }).finally(() => {\n    loading.value = false\n  })\n})\n</script>\n\n<template>\n  <div class=\"w-full flex-col-stretch-center\">\n    <div class=\"mb-6 space-y-2\">\n      <h3 class=\"text-4xl color-[var(--el-text-color-primary)] font-bold\">\n        {{ t('intro') }}\n      </h3>\n      <p class=\"text-sm text-muted-foreground lg:text-base\">\n        {{ t('subIntro') }}\n      </p>\n    </div>\n    <form @submit=\"onSubmit\">\n      <FormField v-slot=\"{ componentField, errors }\" name=\"password\">\n        <FormItem class=\"relative pb-6 space-y-0\">\n          <FormControl>\n            <FaInput type=\"password\" :placeholder=\"t('form.password')\" class=\"w-full\" :class=\"errors.length && 'border-destructive'\" v-bind=\"componentField\" />\n          </FormControl>\n          <Transition enter-active-class=\"transition-opacity\" enter-from-class=\"opacity-0\" leave-active-class=\"transition-opacity\" leave-to-class=\"opacity-0\">\n            <FormMessage class=\"absolute bottom-1 text-xs\" />\n          </Transition>\n        </FormItem>\n      </FormField>\n      <FormField v-slot=\"{ componentField, errors }\" name=\"newPassword\">\n        <FormItem class=\"relative pb-6 space-y-0\">\n          <FormControl>\n            <FaInput type=\"password\" :placeholder=\"t('form.newPassword')\" class=\"w-full\" :class=\"errors.length && 'border-destructive'\" v-bind=\"componentField\" />\n          </FormControl>\n          <Transition enter-active-class=\"transition-opacity\" enter-from-class=\"opacity-0\" leave-active-class=\"transition-opacity\" leave-to-class=\"opacity-0\">\n            <FormMessage class=\"absolute bottom-1 text-xs\" />\n          </Transition>\n        </FormItem>\n      </FormField>\n      <FormField v-slot=\"{ componentField, errors }\" name=\"checkPassword\">\n        <FormItem class=\"relative pb-6 space-y-0\">\n          <FormControl>\n            <FaInput type=\"password\" :placeholder=\"t('form.checkPassword')\" class=\"w-full\" :class=\"errors.length && 'border-destructive'\" v-bind=\"componentField\" />\n          </FormControl>\n          <Transition enter-active-class=\"transition-opacity\" enter-from-class=\"opacity-0\" leave-active-class=\"transition-opacity\" leave-to-class=\"opacity-0\">\n            <FormMessage class=\"absolute bottom-1 text-xs\" />\n          </Transition>\n        </FormItem>\n      </FormField>\n      <FaButton :loading=\"loading\" size=\"lg\" class=\"mt-8 w-full\" type=\"submit\">\n        {{ t('form.save') }}\n      </FaButton>\n    </form>\n  </div>\n</template>\n","<script setup lang=\"ts\">\nimport EditPasswordForm from '@/components/AccountForm/EditPasswordForm.vue'\n\nconst active = ref(0)\nconst tabs = ref([\n  {\n    title: '基本设置',\n    description: '账号的基本信息，头像、昵称等',\n  },\n  {\n    title: '安全设置',\n    description: '定期修改密码可以提高帐号安全性',\n  },\n])\n</script>\n\n<template>\n  <div class=\"min-h-full w-full\">\n    <div class=\"fixed inset-s-0 bottom-0 top-0 h-full w-40 border-e\">\n      <div v-for=\"(tab, index) in tabs\" :key=\"index\" class=\"cursor-pointer px-4 py-3 transition-background-color space-y-2 hover-bg-accent/50\" :class=\"{ 'bg-accent hover-bg-accent!': active === index }\" @click=\"active = index\">\n        <div class=\"text-base text-accent-foreground leading-tight\">\n          {{ tab.title }}\n        </div>\n        <div class=\"text-xs text-accent-foreground/50\">\n          {{ tab.description }}\n        </div>\n      </div>\n    </div>\n    <div class=\"ms-40 min-h-full flex-col-center p-10\">\n      <div v-if=\"active === 0\">\n        请开发者自行扩展\n      </div>\n      <EditPasswordForm v-if=\"active === 1\" />\n    </div>\n  </div>\n</template>\n","<i18n lang=\"yaml\">\nzh-cn:\n  profile: 个人设置\n  preferences: 偏好设置\n  hotkeys: 快捷键介绍\n  logout: 退出登录\n  current_account: 当前登录账号\nzh-tw:\n  profile: 個人設置\n  preferences: 偏好設置\n  hotkeys: 快捷鍵介紹\n  logout: 退出登錄\n  current_account: 當前登錄帳號\nen:\n  profile: Personal Settings\n  preferences: Preferences\n  hotkeys: Hotkeys Introduction\n  logout: Logout\n  current_account: Current Login Account\n</i18n>\n\n<script setup lang=\"ts\">\nimport useSettingsStore from '@/store/modules/settings'\nimport useUserStore from '@/store/modules/user'\nimport eventBus from '@/utils/eventBus'\nimport { useI18n } from 'vue-i18n'\nimport Profile from './profile.vue'\n\nconst router = useRouter()\n\nconst settingsStore = useSettingsStore()\nconst userStore = useUserStore()\n\nconst { t } = useI18n()\nconst { generateI18nTitle } = useMenu()\n\nconst isProfileShow = ref(false)\n</script>\n\n<template>\n  <FaDropdown\n    align=\"end\" :items=\"[\n      [\n        { label: generateI18nTitle(settingsStore.settings.home.title), icon: 'i-mdi:home', handle: () => router.push({ path: settingsStore.settings.home.fullPath }), hide: !settingsStore.settings.home.enable },\n        { label: t('profile'), icon: 'i-mdi:account', handle: () => isProfileShow = true },\n        { label: t('preferences'), icon: 'i-mdi:cog', handle: () => eventBus.emit('global-preferences-toggle'), hide: !settingsStore.settings.userPreferences.enable },\n      ],\n      [\n        { label: t('hotkeys'), icon: 'i-mdi:keyboard', handle: () => eventBus.emit('global-hotkeys-intro-toggle'), hide: settingsStore.mode !== 'pc' },\n      ],\n      [\n        { label: t('logout'), icon: 'i-mdi:logout', handle: () => userStore.logout(settingsStore.settings.home.fullPath) },\n      ],\n    ]\" class=\"flex-center\"\n  >\n    <template #label>\n      <div class=\"space-y-2\">\n        <div class=\"text-xs text-secondary-foreground/50 font-light\">\n          {{ t('current_account') }}\n        </div>\n        <div class=\"flex-center-start gap-2\">\n          <FaAvatar :src=\"userStore.avatar\" :fallback=\"userStore.account.slice(0, 5)\" shape=\"square\" />\n          <div class=\"space-y-1\">\n            <div class=\"text-base lh-none\">\n              {{ userStore.account }}\n            </div>\n            <div class=\"text-xs text-secondary-foreground/50 font-normal\">\n              这里可以显示邮箱\n            </div>\n          </div>\n        </div>\n      </div>\n    </template>\n    <FaButton variant=\"ghost\" class=\"h-9 flex-center gap-1 px-2\">\n      <FaAvatar :src=\"userStore.avatar\" class=\"size-6\">\n        <FaIcon name=\"i-carbon:user-avatar-filled-alt\" class=\"size-6 text-secondary-foreground/50\" />\n      </FaAvatar>\n      <template v-if=\"settingsStore.mode === 'pc'\">\n        {{ userStore.account }}\n        <FaIcon name=\"i-ep:caret-bottom\" />\n      </template>\n    </FaButton>\n  </FaDropdown>\n  <FaModal v-model=\"isProfileShow\" align-center :header=\"false\" :footer=\"false\" :close-on-click-overlay=\"false\" :close-on-press-escape=\"false\" class=\"h-500px min-w-600px overflow-hidden\" content-class=\"min-h-full p-0 flex\">\n    <Profile />\n  </FaModal>\n</template>\n","import { pascalCase } from 'scule'\n\ntype Slots =\n  'header-start' | 'header-end' | 'header-after-logo' |\n  'main-sidebar-top' | 'main-sidebar-bottom' | 'main-sidebar-after-logo' |\n  'sub-sidebar-top' | 'sub-sidebar-bottom' | 'sub-sidebar-after-logo' |\n  'tabbar-start' | 'tabbar-end' |\n  'toolbar-start' | 'toolbar-end' |\n  'free-position'\n\nfunction tryLoadComponent(name: Slots) {\n  const componentMap = import.meta.glob('./*/index.vue', { eager: true })\n  const path = `./${pascalCase(name as unknown as string)}/index.vue`\n  const component = componentMap[path as keyof typeof componentMap]\n  if (!component) {\n    return {\n      default: defineComponent({\n        name: 'SlotsInvalidComponent',\n        render: () => null,\n      }),\n    }\n  }\n  return component\n}\n\nexport function useSlots(name: Slots) {\n  const component = tryLoadComponent(name)\n  return defineComponent((component as any).default)\n}\n"],"names":["props","__props","avatarVariant","cva","useI18n","userStore","useUserStore","loading","ref","onSubmit","useForm","toTypedSchema","z.object","z.string","data","values","toast","active","tabs","router","useRouter","settingsStore","useSettingsStore","t","generateI18nTitle","useMenu","isProfileShow","tryLoadComponent","name","componentMap","__vite_glob_0_0","path","pascalCase","component","defineComponent","useSlots"],"mappings":"0kBAOA,MAAMA,EAAQC,4OCHd,MAAMD,EAAQC,0LCAd,MAAMD,EAAQC,kFCGDC,GAAgBC,EAC3B,wHACA,CACE,SAAU,CACR,KAAM,CACJ,GAAI,oBACJ,KAAM,qBACN,GAAI,oBACN,EACA,MAAO,CACL,OAAQ,eACR,OAAQ,YAAA,CACV,CACF,CAEJ,6ECjBA,MAAMH,EAAQC,8fCgER,KAAA,CAAE,CAAE,EAAIG,EAAQ,EAChBC,EAAYC,EAAa,EAEzBC,EAAUC,EAAI,EAAK,EAmBnBC,EAjBOC,EAAQ,CACnB,iBAAkBC,EAChBC,GAAS,CACP,SAAUC,EAAS,EAAE,IAAI,EAAG,EAAE,gBAAgB,CAAC,EAC/C,YAAaA,EAAS,EAAE,IAAI,EAAG,EAAE,mBAAmB,CAAC,EAAE,IAAI,EAAG,EAAE,sBAAsB,CAAC,EAAE,IAAI,GAAI,EAAE,sBAAsB,CAAC,EAC1H,cAAeA,EAAS,EAAE,IAAI,EAAG,EAAE,qBAAqB,CAAC,CAAA,CAC1D,EAAE,UAAeC,EAAK,cAAgBA,EAAK,cAAe,CACzD,QAAS,EAAE,0BAA0B,EACrC,KAAM,CAAC,eAAe,CACvB,CAAA,CACH,EACA,cAAe,CACb,SAAU,GACV,YAAa,GACb,cAAe,EAAA,CACjB,CACD,EACqB,aAAcC,GAAW,CAC7CR,EAAQ,MAAQ,GAChBF,EAAU,aAAaU,CAAM,EAAE,KAAK,SAAY,CAC9CC,GAAM,QAAQ,cAAc,EAC5BX,EAAU,OAAO,CAAA,CAClB,EAAE,QAAQ,IAAM,CACfE,EAAQ,MAAQ,EAAA,CACjB,CAAA,CACF,ypIChGK,MAAAU,EAAST,EAAI,CAAC,EACdU,EAAOV,EAAI,CACf,CACE,MAAO,OACP,YAAa,gBACf,EACA,CACE,MAAO,OACP,YAAa,iBAAA,CACf,CACD,6nBCeD,MAAMW,EAASC,GAAU,EAEnBC,EAAgBC,GAAiB,EACjCjB,EAAYC,EAAa,EAEzB,CAAE,EAAAiB,CAAE,EAAInB,EAAQ,EAChB,CAAE,kBAAAoB,CAAkB,EAAIC,GAAQ,EAEhCC,EAAgBlB,EAAI,EAAK,mmFC1B/B,SAASmB,GAAiBC,EAAa,CACrC,MAAMC,EAAgE,OAAA,OAAA,CAAA,yBAAAC,EAAA,CAAA,EAChEC,EAAO,KAAKC,GAAWJ,CAAyB,CAAC,aACjDK,EAAYJ,EAAaE,CAAiC,EAChE,OAAKE,GACI,CACL,QAASC,EAAgB,CACvB,KAAM,wBACN,OAAQ,IAAM,IACf,CAAA,CACH,CAGJ,CAEO,SAASC,GAASP,EAAa,CAC9B,MAAAK,EAAYN,GAAiBC,CAAI,EAChC,OAAAM,EAAiBD,EAAkB,OAAO,CACnD"}