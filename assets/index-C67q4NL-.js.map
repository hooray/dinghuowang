{"version":3,"file":"index-C67q4NL-.js","sources":["../../src/layouts/components/MainSidebar/index.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { useSlots } from '@/slots'\nimport useMenuStore from '@/store/modules/menu'\nimport useSettingsStore from '@/store/modules/settings'\nimport hotkeys from 'hotkeys-js'\nimport Logo from '../Logo/index.vue'\nimport Menu from '../Menu/index.vue'\nimport MenuPanel from '../MenuPanel/index.vue'\n\ndefineOptions({\n  name: 'MainSidebar',\n})\n\nconst route = useRoute()\n\nconst settingsStore = useSettingsStore()\nconst menuStore = useMenuStore()\n\nconst { generateI18nTitle, switchTo } = useMenu()\n\nonMounted(() => {\n  hotkeys('alt+`', (e) => {\n    if (settingsStore.settings.menu.enableHotkeys && ['side', 'head'].includes(settingsStore.settings.menu.mode)) {\n      e.preventDefault()\n      switchTo(menuStore.actived + 1 < menuStore.allMenus.length ? menuStore.actived + 1 : 0)\n    }\n  })\n  hotkeys('alt+shift+`', (e) => {\n    if (settingsStore.settings.menu.enableHotkeys && ['side', 'head'].includes(settingsStore.settings.menu.mode)) {\n      e.preventDefault()\n      switchTo(menuStore.actived - 1 >= 0 ? menuStore.actived - 1 : menuStore.allMenus.length - 1)\n    }\n  })\n})\nonUnmounted(() => {\n  hotkeys.unbind('alt+`')\n  hotkeys.unbind('alt+shift+`')\n})\n\nfunction iconName(isActive: boolean, icon?: string, activeIcon?: string) {\n  let name\n  if ((!isActive && icon) || (isActive && !activeIcon)) {\n    name = icon\n  }\n  else if (isActive && activeIcon) {\n    name = activeIcon\n  }\n  return name\n}\n</script>\n\n<template>\n  <Transition name=\"main-sidebar\">\n    <div v-if=\"['side', 'only-side', 'side-panel'].includes(settingsStore.settings.menu.mode) || (settingsStore.mode === 'mobile' && settingsStore.settings.menu.mode !== 'single')\" class=\"main-sidebar-container\">\n      <component :is=\"useSlots('main-sidebar-top')\" />\n      <Logo :show-title=\"false\" class=\"sidebar-logo\" />\n      <component :is=\"useSlots('main-sidebar-after-logo')\" />\n      <FaScrollArea :scrollbar=\"false\" mask gradient-color=\"var(--g-main-sidebar-bg)\" class=\"menu\">\n        <!-- 侧边栏模式（含主导航） -->\n        <div\n          v-if=\"settingsStore.settings.menu.mode === 'side' || (settingsStore.mode === 'mobile' && settingsStore.settings.menu.mode !== 'single')\" class=\"w-full flex flex-col of-hidden py-1 transition-all -mt-2\" :class=\"{\n            [`menu-active-${settingsStore.settings.menu.style}`]: settingsStore.settings.menu.style !== '',\n          }\"\n        >\n          <template v-for=\"(item, index) in menuStore.allMenus\" :key=\"index\">\n            <div\n              class=\"menu-item relative px-2 py-1 transition-all\" :class=\"{\n                active: index === menuStore.actived,\n              }\"\n            >\n              <div\n                v-if=\"item.children && item.children.length !== 0\" class=\"group menu-item-container relative h-full w-full flex cursor-pointer items-center justify-between gap-1 rounded-lg py-4 text-[var(--g-main-sidebar-menu-color)] transition-all hover-bg-[var(--g-main-sidebar-menu-hover-bg)] hover-text-[var(--g-main-sidebar-menu-hover-color)] px-2!\" :class=\"{\n                  'text-[var(--g-main-sidebar-menu-active-color)]! bg-[var(--g-main-sidebar-menu-active-bg)]!': index === menuStore.actived,\n                }\" :title=\"generateI18nTitle(item.meta?.title)\" @click=\"switchTo(index)\"\n              >\n                <div class=\"w-full inline-flex flex-1 flex-col items-center justify-center gap-1\">\n                  <FaIcon v-if=\"iconName(index === menuStore.actived, item.meta?.icon, item.meta?.activeIcon)\" :name=\"iconName(index === menuStore.actived, item.meta?.icon, item.meta?.activeIcon)!\" class=\"menu-item-container-icon transition-transform group-hover-scale-120\" />\n                  <span class=\"w-full flex-1 truncate text-center text-sm transition-height transition-opacity transition-width\">\n                    {{ generateI18nTitle(item.meta?.title) }}\n                  </span>\n                </div>\n                <FaBadge v-if=\"item.meta?.badge\" :value=\"typeof item.meta.badge === 'function' ? item.meta.badge() : item.meta.badge\" :variant=\"typeof item.meta.badgeVariant === 'function' ? item.meta.badgeVariant() : item.meta.badgeVariant\" class=\"absolute inset-e-2 inset-t-2\" />\n              </div>\n            </div>\n          </template>\n        </div>\n        <!-- 侧边栏精简模式 -->\n        <Menu\n          v-else-if=\"settingsStore.settings.menu.mode === 'only-side'\" :menu=\"menuStore.allMenus\" :value=\"route.meta.activeMenu || route.path\" show-collapse-name collapse :direction=\"settingsStore.settings.app.direction\" class=\"-mt-2\" :class=\"{\n            [`menu-active-${settingsStore.settings.menu.style}`]: settingsStore.settings.menu.style !== '',\n          }\"\n        />\n        <!-- 侧边栏面板模式 -->\n        <MenuPanel\n          v-else-if=\"settingsStore.settings.menu.mode === 'side-panel'\" :menu=\"menuStore.allMenus\" :value=\"route.meta.activeMenu || route.path\" show-collapse-name collapse :direction=\"settingsStore.settings.app.direction\" class=\"-mt-2\" :class=\"{\n            [`menu-active-${settingsStore.settings.menu.style}`]: settingsStore.settings.menu.style !== '',\n          }\"\n        />\n      </FaScrollArea>\n      <component :is=\"useSlots('main-sidebar-bottom')\" />\n    </div>\n  </Transition>\n</template>\n\n<style scoped>\n.main-sidebar-container {\n  position: relative;\n  z-index: 10;\n  display: flex;\n  flex-direction: column;\n  width: var(--g-main-sidebar-width);\n  color: var(--g-main-sidebar-menu-color);\n  background-color: var(--g-main-sidebar-bg);\n  box-shadow: 1px 0 0 0 hsl(var(--border)), -1px 0 0 0 hsl(var(--border));\n  transition: background-color 0.3s, color 0.3s, box-shadow 0.3s;\n\n  .sidebar-logo {\n    background-color: var(--g-main-sidebar-bg);\n    transition: background-color 0.3s;\n  }\n\n  .menu {\n    flex: 1;\n\n    .menu-active {\n      &-arrow {\n        .item-container::before,\n        :deep(.menu-item::before) {\n          position: absolute;\n          inset-inline-end: -5px;\n          top: 50%;\n          z-index: 1;\n          width: 0;\n          height: 0;\n          content: \"\";\n          border-block: 5px solid transparent;\n          border-inline-end: 5px solid var(--g-main-sidebar-bg);\n          opacity: 0;\n          transform: translateY(-50%);\n          transition: all 0.3s;\n        }\n\n        .item-container.active::before,\n        :deep(.menu-item.active::before) {\n          inset-inline-end: 8px;\n          opacity: 1;\n        }\n      }\n\n      &-line {\n        .item-container::before,\n        :deep(.menu-item::before) {\n          position: absolute;\n          inset-inline-start: 6px;\n          top: 50%;\n          z-index: 1;\n          width: 4px;\n          height: 0;\n          content: \"\";\n          background-color: var(--g-main-sidebar-menu-active-bg);\n          border-radius: 2px;\n          box-shadow: 0 0 0 1px var(--g-main-sidebar-bg);\n          opacity: 0;\n          transform: translateY(-50%);\n          transition: all 0.3s;\n        }\n\n        .item-container.active::before,\n        :deep(.menu-item.active::before) {\n          height: 20px;\n          opacity: 1;\n        }\n      }\n\n      &-dot {\n        .item-container::before,\n        :deep(.menu-item::before) {\n          position: absolute;\n          inset-inline-start: 0;\n          top: 50%;\n          z-index: 1;\n          width: 10px;\n          height: 10px;\n          content: \"\";\n          background-color: var(--g-main-sidebar-menu-active-bg);\n          border-radius: 50%;\n          box-shadow: 0 0 0 1px var(--g-main-sidebar-bg);\n          opacity: 0;\n          transform: translateY(-50%);\n          transition: all 0.3s;\n        }\n\n        .item-container.active::before,\n        :deep(.menu-item.active::before) {\n          inset-inline-start: 4px;\n          opacity: 1;\n        }\n      }\n    }\n\n    :deep(.menu-item) {\n      .menu-item-container {\n        padding-block: 8px;\n        color: var(--g-main-sidebar-menu-color);\n\n        &:hover {\n          color: var(--g-main-sidebar-menu-hover-color);\n          background-color: var(--g-main-sidebar-menu-hover-bg);\n        }\n\n        .menu-item-container-icon {\n          font-size: 20px !important;\n        }\n\n        .badge {\n          position: absolute;\n          inset-inline-end: 0;\n          top: 0.5rem;\n          display: inline-flex;\n          transform: scale(1);\n        }\n      }\n\n      &.active .menu-item-container {\n        color: var(--g-main-sidebar-menu-active-color) !important;\n        background-color: var(--g-main-sidebar-menu-active-bg) !important;\n      }\n    }\n  }\n}\n\n/* 主侧边栏动画 */\n.main-sidebar-enter-active,\n.main-sidebar-leave-active {\n  transition: 0.3s;\n}\n\n.main-sidebar-enter-from,\n.main-sidebar-leave-to {\n  transform: translateX(calc(var(--g-main-sidebar-width) * -1));\n\n  [dir=\"rtl\"] & {\n    transform: translateX(var(--g-main-sidebar-width));\n  }\n}\n</style>\n"],"names":["route","useRoute","settingsStore","useSettingsStore","menuStore","useMenuStore","generateI18nTitle","switchTo","useMenu","onMounted","hotkeys","e","onUnmounted","iconName","isActive","icon","activeIcon","name"],"mappings":"irCAaA,MAAMA,EAAQC,EAAS,EAEjBC,EAAgBC,EAAiB,EACjCC,EAAYC,EAAa,EAEzB,CAAE,kBAAAC,EAAmB,SAAAC,CAAS,EAAIC,EAAQ,EAEhDC,EAAU,IAAM,CACNC,EAAA,QAAUC,GAAM,CAClBT,EAAc,SAAS,KAAK,eAAiB,CAAC,OAAQ,MAAM,EAAE,SAASA,EAAc,SAAS,KAAK,IAAI,IACzGS,EAAE,eAAe,EACRJ,EAAAH,EAAU,QAAU,EAAIA,EAAU,SAAS,OAASA,EAAU,QAAU,EAAI,CAAC,EACxF,CACD,EACOM,EAAA,cAAgBC,GAAM,CACxBT,EAAc,SAAS,KAAK,eAAiB,CAAC,OAAQ,MAAM,EAAE,SAASA,EAAc,SAAS,KAAK,IAAI,IACzGS,EAAE,eAAe,EACRJ,EAAAH,EAAU,QAAU,GAAK,EAAIA,EAAU,QAAU,EAAIA,EAAU,SAAS,OAAS,CAAC,EAC7F,CACD,CAAA,CACF,EACDQ,EAAY,IAAM,CAChBF,EAAQ,OAAO,OAAO,EACtBA,EAAQ,OAAO,aAAa,CAAA,CAC7B,EAEQ,SAAAG,EAASC,EAAmBC,EAAeC,EAAqB,CACnE,IAAAC,EACJ,MAAK,CAACH,GAAYC,GAAUD,GAAY,CAACE,EAChCC,EAAAF,EAEAD,GAAYE,IACZC,EAAAD,GAEFC,CAAA"}