
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * https://fantastic-admin.hurui.me
 */
    
import{_ as st}from"./index-QETfPN_m.js";import{a9 as lt,a2 as at,n as dt,p as ct,c as T,Y as D,aa as ut,d as ht,a0 as vt,ab as mt,ac as pt,a8 as ft,ad as K,ae as gt,Q as yt,i as U,o as L,k as O,a as W,a3 as J,b as x,O as N,u as f,z as G,C as F,P as wt,w as Q,T as bt,af as xt,ag as Z,Z as St,ah as _t,N as kt,ai as Pt,a4 as Ct}from"./index-CdccOLXW.js";import{u as Ot}from"./index-CP3Qk6fy.js";import Et from"./index-k3S9f2Xj.js";import Lt from"./index-DW9U4qEG.js";import Tt from"./index--irG51_e.js";import At from"./index-sN3039VT.js";import Wt from"./index-CW5lcwV1.js";import Dt from"./index-BIjI9PA1.js";import Mt from"./index-B_FbnhA0.js";import Ht from"./iframe-DAlMTAkU.js";import It from"./link-tDOuvT5H.js";import{u as Rt}from"./useMainPage-DCnZWpSq.js";import"./index.vue_vue_type_script_setup_true_lang-MrsjEm5K.js";import"./index-GW34aOAv.js";import"./index.vue_vue_type_script_setup_true_lang-DFMjGAEm.js";import"./index-cyFqEhL5.js";import"./index.vue_vue_type_script_setup_true_lang-DeTnvToU.js";import"./sortable.esm-C83syoBY.js";import"./index.vue_vue_type_script_setup_true_lang-BNQJd3u6.js";import"./index.vue_vue_type_script_setup_true_lang-Dx321mQw.js";import"./index.vue_vue_type_script_setup_true_lang-DPDdTXcJ.js";import"./item-CVvbWRKA.js";import"./sub.vue_vue_type_script_setup_true_lang-D6G_zNsr.js";import"./index.vue_vue_type_script_setup_true_lang-C17H02us.js";import"./item-5H3rmTyU.js";import"./sub.vue_vue_type_script_setup_true_lang-CEAG9GJF.js";import"./rightSide.vue_vue_type_script_setup_true_lang-WOjdtrGk.js";import"./tools.vue_vue_type_script_setup_true_lang-SEMVA0z4.js";import"./index-CauVL_iY.js";import"./index-BofR_j1Z.js";import"./item.vue_vue_type_script_setup_true_lang-CVQsHLdk.js";import"./index.vue_vue_type_script_setup_true_lang-CQIop25W.js";import"./index.vue_vue_type_script_setup_true_lang-64CJWHAs.js";import"./index.vue_vue_type_script_setup_true_lang-DGOpLTW2.js";import"./panel-BtaN2TII.js";import"./index.vue_vue_type_script_setup_true_lang-ohJhY9f_.js";import"./index-BczSlSSd.js";import"./index-C-QP4aMw.js";import"./index.vue_vue_type_script_setup_true_lang--R_qDaBU.js";import"./search-Dg4x5Wd7.js";import"./index-RKlUGH8s.js";import"./index-C74P92lh.js";import"./all.vue_vue_type_script_setup_true_lang-eg1N4M6-.js";import"./panel.vue_vue_type_script_setup_true_lang-8oTGNUZU.js";import"./index-C91H0LYE.js";import"./index-QgTZRgBT.js";import"./moreAction-BRdRgRxn.js";import"./useTabbar--554fpAD.js";import"./index-DUrNoY39.js";import"./leftSide.vue_vue_type_script_setup_true_lang-pVhLDYyy.js";/*!
 * watermark-js-plus v1.5.8
 * (c) 2022-2024 Michael Sun
 * Released under the MIT License.
 */function zt(r,t){t===void 0&&(t={});var e=t.insertAt;if(!(typeof document>"u")){var a=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",e==="top"&&a.firstChild?a.insertBefore(i,a.firstChild):a.appendChild(i),i.styleSheet?i.styleSheet.cssText=r:i.appendChild(document.createTextNode(r))}}var Vt="@keyframes watermark{0%{background-position:0 0}25%{background-position:100% 100%}50%{background-position:0 0}75%{background-position:100% -100%}to{background-position:0 0}}";zt(Vt);var q=function(r,t){return q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])},q(r,t)};function Bt(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");q(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var E=function(){return E=Object.assign||function(t){for(var e,a=1,i=arguments.length;a<i;a++){e=arguments[a];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},E.apply(this,arguments)};function C(r,t,e,a){function i(n){return n instanceof e?n:new e(function(o){o(n)})}return new(e||(e=Promise))(function(n,o){function s(c){try{l(a.next(c))}catch(h){o(h)}}function d(c){try{l(a.throw(c))}catch(h){o(h)}}function l(c){c.done?n(c.value):i(c.value).then(s,d)}l((a=a.apply(r,t||[])).next())})}function _(r,t){var e={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},a,i,n,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(c){return d([l,c])}}function d(l){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(e=0)),e;)try{if(a=1,i&&(n=l[0]&2?i.return:l[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,l[1])).done)return n;switch(i=0,n&&(l=[l[0]&2,n.value]),l[0]){case 0:case 1:n=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(n=e.trys,!(n=n.length>0&&n[n.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!n||l[1]>n[0]&&l[1]<n[3])){e.label=l[1];break}if(l[0]===6&&e.label<n[1]){e.label=n[1],n=l;break}if(n&&e.label<n[2]){e.label=n[2],e.ops.push(l);break}n[2]&&e.ops.pop(),e.trys.pop();continue}l=t.call(r,e)}catch(c){l=[6,c],i=0}finally{a=n=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var nt=function(r){return r.toDataURL("image/png",1)},rt=function(r){return typeof r=="function"},S=function(r){return r===void 0},jt=function(r){return typeof r=="string"},tt=function(r,t,e){t===void 0&&(t={}),e===void 0&&(e="http://www.w3.org/2000/svg");var a=document.createElementNS(e,r);for(var i in t)a.setAttribute(i,t[i]);return a},Nt=function(r,t,e){for(var a=[],i="",n="",o=0,s=t.length;o<s;o++){if(n=t.charAt(o),n===`
`){a.push(i),i="";continue}i+=n,r.measureText(i).width>e&&(a.push(i.substring(0,i.length-1)),i="",o--)}return a.push(i),a},Gt=function(r,t){return C(void 0,void 0,void 0,function(){var e,a,i,n,o,s,d,l,c;return _(this,function(h){switch(h.label){case 0:return e=tt("svg",{xmlns:"http://www.w3.org/2000/svg"}),a=document.createElement("div"),a.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),a.style.cssText=`
  text-align: center;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  font: `.concat(r.font,`;
  color: `).concat(t.fontColor,`;
`),a.innerHTML="<div class='rich-text-content'>".concat(t.content,"</div>"),document.body.appendChild(a),[4,Ft(a)];case 1:return h.sent(),i=(c=a.querySelector(".rich-text-content"))===null||c===void 0?void 0:c.getBoundingClientRect(),n=i==null?void 0:i.width,o=i==null?void 0:i.height,document.body.removeChild(a),s=t.richTextWidth||n||t.width,d=t.richTextHeight||o||t.height,e.setAttribute("width",s.toString()),e.setAttribute("height",d.toString()),l=tt("foreignObject",{width:s.toString(),height:d.toString()}),l.appendChild(a),e.appendChild(l),[2,{element:e,width:s,height:d}]}})})};function Ft(r){return C(this,void 0,void 0,function(){var t,e,a,i,n;return _(this,function(o){switch(o.label){case 0:t=r.querySelectorAll("img"),e=function(s){var d,l,c,h,v;return _(this,function(p){switch(p.label){case 0:if(d=s.getAttribute("src"),!d)return[3,6];p.label=1;case 1:return p.trys.push([1,5,,6]),[4,fetch(d)];case 2:return l=p.sent(),[4,l.blob()];case 3:return c=p.sent(),[4,new Promise(function(y,u){var m=new FileReader;m.onloadend=function(){return y(m.result)},m.onerror=u,m.readAsDataURL(c)})];case 4:return h=p.sent(),jt(h)&&s.setAttribute("src",h),[3,6];case 5:return v=p.sent(),console.error("Error converting ".concat(d," to base64:"),v),[3,6];case 6:return[2]}})},a=0,i=Array.from(t),o.label=1;case 1:return a<i.length?(n=i[a],[5,e(n)]):[3,4];case 2:o.sent(),o.label=3;case 3:return a++,[3,1];case 4:return[2]}})})}var qt=function(r){var t=r.outerHTML.replace(/<(img|br|input|hr|embed)(.*?)>/g,"<$1$2/>").replace(/\n/g,"").replace(/\t/g,"").replace(/#/g,"%23");return"data:image/svg+xml;charset=utf-8,".concat(t)},b=function(r,t){return S(r)?t:r},et=function(r,t,e){t===void 0&&(t=void 0),e===void 0&&(e=void 0);var a=new Image;return a.setAttribute("crossOrigin","Anonymous"),!S(t)&&(a.width=t),!S(e)&&(a.height=e),a.src=r,new Promise(function(i){a.onload=function(){i(a)}})},$t=function(r,t,e){return Array.from({length:r},function(){return new Array(t).fill(e)})},it={width:300,height:300,rotate:45,layout:"default",auxiliaryLine:!1,translatePlacement:"middle",contentType:"text",content:"hello watermark-js-plus",textType:"fill",imageWidth:0,imageHeight:0,lineHeight:30,zIndex:2147483647,backgroundPosition:"0 0",backgroundRepeat:"repeat",fontSize:"20px",fontFamily:"sans-serif",fontStyle:"",fontVariant:"",fontColor:"#000",fontWeight:"normal",filter:"none",letterSpacing:"0px",wordSpacing:"0px",globalAlpha:.5,mode:"default",mutationObserve:!0,monitorProtection:!1,movable:!1,parent:"body",onSuccess:function(){},onBeforeDestroy:function(){},onDestroyed:function(){},onObserveError:function(){}},Yt=function(r,t,e){var a=r.getContext("2d");if(a===null)throw new Error("get context error");a.font="".concat(t.fontStyle," ").concat(t.fontVariant," ").concat(t.fontWeight," ").concat(t.fontSize," ").concat(t.fontFamily),a.filter=t.filter,a.letterSpacing=t.letterSpacing,a.wordSpacing=t.wordSpacing,t!=null&&t.rotate&&(t.rotate=(360-t.rotate%360)*(Math.PI/180)),S(e.textRowMaxWidth)&&(t.textRowMaxWidth=t.width);var i={image:{rect:{width:t.imageWidth,height:t.imageHeight},position:{x:0,y:0}},textLine:{data:[],yOffsetValue:0},advancedStyleParams:{linear:{x0:0,x1:0},radial:{x0:0,y0:0,r0:0,x1:0,y1:0,r1:0},conic:{x:0,y:0,startAngle:0},pattern:{}}};switch(t.contentType){case"text":i.textLine.data=[t.content];break;case"multi-line-text":i.textLine.data=Nt(a,t.content,t.textRowMaxWidth);break}var n=t.width/2,o=t.height/2,s="middle",d="center";switch(!S(e==null?void 0:e.translateX)&&!S(e==null?void 0:e.translateY)?(n=e==null?void 0:e.translateX,o=e==null?void 0:e.translateY,s="top",d="left"):(i.advancedStyleParams.linear.x0=-t.width/2,i.advancedStyleParams.linear.x1=t.width/2,i.advancedStyleParams.radial.r0=0,i.advancedStyleParams.radial.r1=t.width/2),e.translatePlacement){case"top":n=t.width/2,o=0,s="top",i.advancedStyleParams.linear.x0=-t.width/2,i.advancedStyleParams.linear.x1=t.width/2,i.advancedStyleParams.radial.y0=i.textLine.data.length*t.lineHeight/2,i.advancedStyleParams.radial.y1=i.textLine.data.length*t.lineHeight/2,i.advancedStyleParams.conic.y=i.textLine.data.length*t.lineHeight/2;break;case"top-start":n=0,o=0,s="top",d="start",i.advancedStyleParams.linear.x0=0,i.advancedStyleParams.linear.x1=t.width,i.advancedStyleParams.radial.x0=t.width/2,i.advancedStyleParams.radial.y0=i.textLine.data.length*t.lineHeight/2,i.advancedStyleParams.radial.x1=t.width/2,i.advancedStyleParams.radial.y1=i.textLine.data.length*t.lineHeight/2,i.advancedStyleParams.conic.x=t.width/2,i.advancedStyleParams.conic.y=i.textLine.data.length*t.lineHeight/2;break;case"top-end":n=t.width,o=0,s="top",d="end",i.advancedStyleParams.linear.x0=0,i.advancedStyleParams.linear.x1=-t.width,i.advancedStyleParams.radial.x0=-t.width/2,i.advancedStyleParams.radial.y0=i.textLine.data.length*t.lineHeight/2,i.advancedStyleParams.radial.x1=-t.width/2,i.advancedStyleParams.radial.y1=i.textLine.data.length*t.lineHeight/2,i.advancedStyleParams.conic.x=-t.width/2,i.advancedStyleParams.conic.y=i.textLine.data.length*t.lineHeight/2;break;case"bottom":n=t.width/2,o=t.height,s="bottom",i.advancedStyleParams.linear.x0=-t.width/2,i.advancedStyleParams.linear.x1=t.width/2,i.advancedStyleParams.radial.y0=-i.textLine.data.length*t.lineHeight/2,i.advancedStyleParams.radial.y1=-i.textLine.data.length*t.lineHeight/2,i.advancedStyleParams.conic.x=0,i.advancedStyleParams.conic.y=-i.textLine.data.length*t.lineHeight/2;break;case"bottom-start":n=0,o=t.height,s="bottom",d="start",i.advancedStyleParams.linear.x0=0,i.advancedStyleParams.linear.x1=t.width,i.advancedStyleParams.radial.x0=t.width/2,i.advancedStyleParams.radial.y0=-i.textLine.data.length*t.lineHeight/2,i.advancedStyleParams.radial.x1=t.width/2,i.advancedStyleParams.radial.y1=-i.textLine.data.length*t.lineHeight/2,i.advancedStyleParams.conic.x=t.width/2,i.advancedStyleParams.conic.y=-i.textLine.data.length*t.lineHeight/2;break;case"bottom-end":n=t.width,o=t.height,s="bottom",d="end",i.advancedStyleParams.linear.x0=0,i.advancedStyleParams.linear.x1=-t.width,i.advancedStyleParams.radial.x0=-t.width/2,i.advancedStyleParams.radial.y0=-i.textLine.data.length*t.lineHeight/2,i.advancedStyleParams.radial.x1=-t.width/2,i.advancedStyleParams.radial.y1=-i.textLine.data.length*t.lineHeight/2,i.advancedStyleParams.conic.x=-t.width/2,i.advancedStyleParams.conic.y=-i.textLine.data.length*t.lineHeight/2;break;case"left":n=0,o=t.height/2,d="start",i.advancedStyleParams.linear.x0=0,i.advancedStyleParams.linear.x1=t.width,i.advancedStyleParams.radial.x0=t.width/2,i.advancedStyleParams.radial.x1=t.width/2,i.advancedStyleParams.conic.x=t.width/2,i.advancedStyleParams.conic.y=0;break;case"right":n=t.width,o=t.height/2,d="end",i.advancedStyleParams.linear.x0=0,i.advancedStyleParams.linear.x1=-t.width,i.advancedStyleParams.radial.x0=-t.width/2,i.advancedStyleParams.radial.x1=-t.width/2,i.advancedStyleParams.conic.x=-t.width/2,i.advancedStyleParams.conic.y=0;break}if(t.translateX=n,t.translateY=o,S(e==null?void 0:e.textBaseline)&&(t.textBaseline=s),S(e==null?void 0:e.textAlign)&&(t.textAlign=d),["text","multi-line-text"].includes(t.contentType))switch(t.textBaseline){case"middle":i.textLine.yOffsetValue=(i.textLine.data.length-1)*t.lineHeight/2;break;case"bottom":case"alphabetic":case"ideographic":i.textLine.yOffsetValue=(i.textLine.data.length-1)*t.lineHeight+(t.lineHeight-parseInt(t.fontSize))/2;break;case"top":case"hanging":i.textLine.yOffsetValue=-t.lineHeight/2+parseInt(t.fontSize)/2;break}return i},$=function(r){typeof window>"u"||r&&(Object.defineProperty(window,"MutationObserver",{writable:!1,configurable:!1}),Object.defineProperty(window,"requestAnimationFrame",{writable:!1,configurable:!1}))},M=function(){function r(t,e){this.props=t,this.options=e,this.canvas=r.createCanvas(this.options.width,this.options.height),this.recommendOptions=Yt(this.canvas,this.options,this.props)}return r.createCanvas=function(t,e){var a,i=window.devicePixelRatio||1,n=document.createElement("canvas");return n.width=t*i,n.height=e*i,n.style.width="".concat(t,"px"),n.style.height="".concat(e,"px"),(a=n.getContext("2d"))===null||a===void 0||a.setTransform(i,0,0,i,0,0),n},r.clearCanvas=function(t){var e=t.getContext("2d");if(e===null)throw new Error("get context error");e.restore(),e.resetTransform(),e.clearRect(0,0,t.width,t.height);var a=window.devicePixelRatio||1;e.setTransform(a,0,0,a,0,0)},r.prototype.getCanvas=function(){return this.canvas},r.prototype.clear=function(){r.clearCanvas(this.canvas)},r.prototype.draw=function(){var t=this,e=this.canvas.getContext("2d");if(e===null)throw new Error("get context error");return this.options.auxiliaryLine&&(e.beginPath(),e.rect(0,0,this.options.width,this.options.height),e.lineWidth=1,e.strokeStyle="#000",e.stroke(),e.closePath(),e.beginPath(),e.rect(this.options.translateX,this.options.translateY,1,1),e.lineWidth=1,e.strokeStyle="#f00",e.stroke(),e.closePath()),this.setStyle(e),e.save(),e.translate(this.options.translateX,this.options.translateY),e.rotate(this.options.rotate),new Promise(function(a){switch(t.options.contentType){case"text":t.drawText(e,a);break;case"image":t.drawImage(e,a);break;case"multi-line-text":t.drawMultiLineText(e,a);break;case"rich-text":t.drawRichText(e,a);break}})},r.prototype.setStyle=function(t){var e,a="fillStyle";this.options.textType==="stroke"&&(a="strokeStyle");var i=this.options.fontColor;if(!((e=this.options)===null||e===void 0)&&e.advancedStyle)switch(this.options.advancedStyle.type){case"linear":i=this.createLinearGradient(t);break;case"radial":i=this.createRadialGradient(t);break;case"conic":i=this.createConicGradient(t);break;case"pattern":i=this.createPattern(t);break}t[a]&&i&&(t[a]=i),this.options.textAlign&&(t.textAlign=this.options.textAlign),this.options.textBaseline&&(t.textBaseline=this.options.textBaseline),t.globalAlpha=this.options.globalAlpha,this.options.shadowStyle&&(t.shadowBlur=b(this.options.shadowStyle.shadowBlur,0),t.shadowColor=b(this.options.shadowStyle.shadowColor,"#00000000"),t.shadowOffsetX=b(this.options.shadowStyle.shadowOffsetX,0),t.shadowOffsetY=b(this.options.shadowStyle.shadowOffsetY,0)),rt(this.options.extraDrawFunc)&&this.options.extraDrawFunc(t)},r.prototype.createLinearGradient=function(t){var e,a,i,n,o,s,d,l,c,h,v,p,y,u,m,w=t.createLinearGradient(b((i=(a=(e=this.options.advancedStyle)===null||e===void 0?void 0:e.params)===null||a===void 0?void 0:a.linear)===null||i===void 0?void 0:i.x0,this.recommendOptions.advancedStyleParams.linear.x0),b((s=(o=(n=this.options.advancedStyle)===null||n===void 0?void 0:n.params)===null||o===void 0?void 0:o.linear)===null||s===void 0?void 0:s.y0,0),b((c=(l=(d=this.options.advancedStyle)===null||d===void 0?void 0:d.params)===null||l===void 0?void 0:l.linear)===null||c===void 0?void 0:c.x1,this.recommendOptions.advancedStyleParams.linear.x1),b((p=(v=(h=this.options.advancedStyle)===null||h===void 0?void 0:h.params)===null||v===void 0?void 0:v.linear)===null||p===void 0?void 0:p.y1,0));return(m=(u=(y=this.options)===null||y===void 0?void 0:y.advancedStyle)===null||u===void 0?void 0:u.colorStops)===null||m===void 0||m.forEach(function(g){w.addColorStop(g.offset,g.color)}),w},r.prototype.createConicGradient=function(t){var e,a,i,n,o,s,d,l,c,h,v,p,y,u,m,w=t.createConicGradient(b((n=(i=(a=(e=this.options)===null||e===void 0?void 0:e.advancedStyle)===null||a===void 0?void 0:a.params)===null||i===void 0?void 0:i.conic)===null||n===void 0?void 0:n.startAngle,0),b((l=(d=(s=(o=this.options)===null||o===void 0?void 0:o.advancedStyle)===null||s===void 0?void 0:s.params)===null||d===void 0?void 0:d.conic)===null||l===void 0?void 0:l.x,this.recommendOptions.advancedStyleParams.conic.x),b((p=(v=(h=(c=this.options)===null||c===void 0?void 0:c.advancedStyle)===null||h===void 0?void 0:h.params)===null||v===void 0?void 0:v.conic)===null||p===void 0?void 0:p.y,this.recommendOptions.advancedStyleParams.conic.y));return(m=(u=(y=this.options)===null||y===void 0?void 0:y.advancedStyle)===null||u===void 0?void 0:u.colorStops)===null||m===void 0||m.forEach(function(g){w.addColorStop(g.offset,g.color)}),w},r.prototype.createRadialGradient=function(t){var e,a,i,n,o,s,d,l,c,h,v,p,y,u,m,w,g,k,P,A,H,I,R,z,V,B,j,Y=t.createRadialGradient(b((n=(i=(a=(e=this.options)===null||e===void 0?void 0:e.advancedStyle)===null||a===void 0?void 0:a.params)===null||i===void 0?void 0:i.radial)===null||n===void 0?void 0:n.x0,this.recommendOptions.advancedStyleParams.radial.x0),b((l=(d=(s=(o=this.options)===null||o===void 0?void 0:o.advancedStyle)===null||s===void 0?void 0:s.params)===null||d===void 0?void 0:d.radial)===null||l===void 0?void 0:l.y0,this.recommendOptions.advancedStyleParams.radial.y0),b((p=(v=(h=(c=this.options)===null||c===void 0?void 0:c.advancedStyle)===null||h===void 0?void 0:h.params)===null||v===void 0?void 0:v.radial)===null||p===void 0?void 0:p.r0,this.recommendOptions.advancedStyleParams.radial.r0),b((w=(m=(u=(y=this.options)===null||y===void 0?void 0:y.advancedStyle)===null||u===void 0?void 0:u.params)===null||m===void 0?void 0:m.radial)===null||w===void 0?void 0:w.x1,this.recommendOptions.advancedStyleParams.radial.x1),b((A=(P=(k=(g=this.options)===null||g===void 0?void 0:g.advancedStyle)===null||k===void 0?void 0:k.params)===null||P===void 0?void 0:P.radial)===null||A===void 0?void 0:A.y1,this.recommendOptions.advancedStyleParams.radial.y1),b((z=(R=(I=(H=this.options)===null||H===void 0?void 0:H.advancedStyle)===null||I===void 0?void 0:I.params)===null||R===void 0?void 0:R.radial)===null||z===void 0?void 0:z.r1,this.recommendOptions.advancedStyleParams.radial.r1));return(j=(B=(V=this.options)===null||V===void 0?void 0:V.advancedStyle)===null||B===void 0?void 0:B.colorStops)===null||j===void 0||j.forEach(function(X){Y.addColorStop(X.offset,X.color)}),Y},r.prototype.createPattern=function(t){var e,a,i,n,o,s,d,l;return t.createPattern((n=(i=(a=(e=this.options)===null||e===void 0?void 0:e.advancedStyle)===null||a===void 0?void 0:a.params)===null||i===void 0?void 0:i.pattern)===null||n===void 0?void 0:n.image,((l=(d=(s=(o=this.options)===null||o===void 0?void 0:o.advancedStyle)===null||s===void 0?void 0:s.params)===null||d===void 0?void 0:d.pattern)===null||l===void 0?void 0:l.repetition)||"")},r.prototype.setText=function(t,e){var a="fillText";this.options.textType==="stroke"&&(a="strokeText"),t[a]&&t[a](e.text,e.x,e.y,e.maxWidth)},r.prototype.drawText=function(t,e){this.setText(t,{text:this.options.content,x:0,y:0-this.recommendOptions.textLine.yOffsetValue,maxWidth:this.options.textRowMaxWidth||this.options.width}),e(t.canvas)},r.prototype.drawImage=function(t,e){var a=this;et(this.options.image).then(function(i){var n=a.getImageRect(i),o=n.width,s=n.height,d=a.getDrawImagePosition(o,s);t.drawImage(i,d.x,d.y,o,s),e(t.canvas)})},r.prototype.drawMultiLineText=function(t,e){var a=this,i=this.recommendOptions.textLine.data,n=this.recommendOptions.textLine.yOffsetValue;i.forEach(function(o,s){a.setText(t,{text:o,x:0,y:a.options.lineHeight*s-n,maxWidth:a.options.textRowMaxWidth||a.options.width})}),e(t.canvas)},r.prototype.drawRichText=function(t,e){return C(this,void 0,void 0,function(){var a,i=this;return _(this,function(n){switch(n.label){case 0:return[4,Gt(t,this.options)];case 1:return a=n.sent(),et(qt(a.element),a.width,a.height).then(function(o){var s=i.getDrawImagePosition(o.width,o.height);t.drawImage(o,s.x,s.y,o.width,o.height),e(t.canvas)}),[2]}})})},r.prototype.getImageRect=function(t){var e={width:this.options.imageWidth||0,height:this.options.imageHeight||0};switch(!0){case(e.width!==0&&e.height===0):e.height=e.width*t.height/t.width;break;case(e.width===0&&e.height!==0):e.width=e.height*t.width/t.height;break;case(e.width===0&&e.height===0):e.width=t.width,e.height=t.height;break}return e},r.prototype.getDrawImagePosition=function(t,e){var a,i,n={x:-t/2,y:-e/2};switch(this.options.translatePlacement){case"top":n.x=-t/2,n.y=0;break;case"top-start":n.x=0,n.y=0;break;case"top-end":n.x=-t,n.y=0;break;case"bottom":n.x=-t/2,n.y=-e;break;case"bottom-start":n.x=0,n.y=-e;break;case"bottom-end":n.x=-t,n.y=-e;break;case"left":n.x=0,n.y=-e/2;break;case"right":n.x=-t,n.y=-e/2;break}return!S((a=this.props)===null||a===void 0?void 0:a.translateX)&&(n.x=0),!S((i=this.props)===null||i===void 0?void 0:i.translateY)&&(n.y=0),n},r}(),Xt=function(){function r(t,e){var a,i,n,o;this.options=t,this.partialWidth=this.options.width,this.partialHeight=this.options.height,this.rows=((a=this.options.gridLayoutOptions)===null||a===void 0?void 0:a.rows)||1,this.cols=((i=this.options.gridLayoutOptions)===null||i===void 0?void 0:i.cols)||1,this.matrix=((n=this.options.gridLayoutOptions)===null||n===void 0?void 0:n.matrix)||$t(this.rows,this.cols,1),this.gap=((o=this.options.gridLayoutOptions)===null||o===void 0?void 0:o.gap)||[0,0],this.partialCanvas=e}return r.prototype.draw=function(){var t,e,a,i,n,o,s,d,l=M.createCanvas(((t=this.options.gridLayoutOptions)===null||t===void 0?void 0:t.width)||this.partialWidth*this.cols+this.gap[0]*this.cols,((e=this.options.gridLayoutOptions)===null||e===void 0?void 0:e.height)||this.partialHeight*this.rows+this.gap[1]*this.rows),c=l.getContext("2d");!((a=this.options.gridLayoutOptions)===null||a===void 0)&&a.backgroundImage&&(c==null||c.drawImage((i=this.options.gridLayoutOptions)===null||i===void 0?void 0:i.backgroundImage,0,0,(n=this.options.gridLayoutOptions)===null||n===void 0?void 0:n.width,(o=this.options.gridLayoutOptions)===null||o===void 0?void 0:o.height));for(var h=0;h<this.rows;h++)for(var v=0;v<this.cols;v++)!((d=(s=this.matrix)===null||s===void 0?void 0:s[h])===null||d===void 0)&&d[v]&&(c==null||c.drawImage(this.partialCanvas,this.partialWidth*v+this.gap[0]*v,this.partialHeight*h+this.gap[1]*h,this.partialWidth,this.partialHeight));return l},r}(),Kt=function(r,t){switch(r.layout){case"grid":return new Xt(r,t).draw();default:return t}},Ut=function(r){var t,e,a;switch(r.layout){case"grid":{var i=((t=r.gridLayoutOptions)===null||t===void 0?void 0:t.cols)||1,n=((e=r.gridLayoutOptions)===null||e===void 0?void 0:e.rows)||1,o=((a=r.gridLayoutOptions)===null||a===void 0?void 0:a.gap)||[0,0];return[r.width*i+o[0]*i,r.height*n+o[1]*n]}default:return[r.width,r.height]}},ot=function(){function r(t){t===void 0&&(t={}),this.parentElement=document.body,this.isCreating=!1,this.props=t,this.options=E(E({},it),t),this.changeParentElement(this.options.parent),this.watermarkCanvas=new M(this.props,this.options),$(this.options.monitorProtection)}return r.prototype.changeOptions=function(){return C(this,arguments,void 0,function(t,e,a){return t===void 0&&(t={}),e===void 0&&(e="overwrite"),a===void 0&&(a=!0),_(this,function(i){switch(i.label){case 0:return this.initConfigData(t,e),$(this.options.monitorProtection),a?(this.remove(),[4,this.create()]):[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},r.prototype.create=function(){return C(this,void 0,void 0,function(){var t,e,a,i,n,o,s,d,l,c,h,v;return _(this,function(p){switch(p.label){case 0:return this.isCreating?[2]:(this.isCreating=!0,this.validateUnique()?this.validateContent()?(t=S(this.watermarkDom),[4,(o=this.watermarkCanvas)===null||o===void 0?void 0:o.draw()]):(this.isCreating=!1,[2]):(this.isCreating=!1,[2]));case 1:if(p.sent(),this.layoutCanvas=Kt(this.options,(s=this.watermarkCanvas)===null||s===void 0?void 0:s.getCanvas()),e=nt(this.layoutCanvas),(d=this.watermarkCanvas)===null||d===void 0||d.clear(),this.watermarkDom=document.createElement("div"),a=document.createElement("div"),this.watermarkDom.__WATERMARK__="watermark",this.watermarkDom.__WATERMARK__INSTANCE__=this,i=this.checkParentElementType(),this.watermarkDom.style.cssText=`
      z-index:`.concat(this.options.zIndex,`!important;display:block!important;visibility:visible!important;transform:none!important;scale:none!important;
      `).concat(i==="custom"?"top:0!important;bottom:0!important;left:0!important;right:0!important;height:100%!important;pointer-events:none!important;position:absolute!important;":"position:relative!important;",`
    `),n=Ut(this.options),a.style.cssText=`
      display:block!important;visibility:visible!important;pointer-events:none;top:0;bottom:0;left:0;right:0;transform:none!important;scale:none!important;
      position:`.concat(i==="root"?"fixed":"absolute",`!important;-webkit-print-color-adjust:exact!important;width:100%!important;height:100%!important;
      z-index:`).concat(this.options.zIndex,"!important;background-image:url(").concat(e,")!important;background-repeat:").concat(this.options.backgroundRepeat,`!important;
      background-size:`).concat(n[0],"px ").concat(n[1],"px!important;background-position:").concat(this.options.backgroundPosition,`;
      `).concat(this.options.movable?"animation: 200s ease 0s infinite normal none running watermark !important;":"",`
    `),this.watermarkDom.appendChild(a),this.parentElement.appendChild(this.watermarkDom),this.options.mutationObserve)try{this.bindMutationObserve()}catch{(c=(l=this.options).onObserveError)===null||c===void 0||c.call(l)}return t&&((v=(h=this.options).onSuccess)===null||v===void 0||v.call(h)),this.isCreating=!1,[2]}})})},r.prototype.destroy=function(){this.remove(),this.watermarkDom=void 0},r.prototype.check=function(){return C(this,void 0,void 0,function(){return _(this,function(t){return[2,this.parentElement.contains(this.watermarkDom)]})})},r.prototype.remove=function(){var t,e,a,i,n,o,s,d;(e=(t=this.options).onBeforeDestroy)===null||e===void 0||e.call(t),(a=this.observer)===null||a===void 0||a.disconnect(),(i=this.parentObserve)===null||i===void 0||i.disconnect(),this.unbindCheckWatermarkElementEvent(),(o=(n=this.watermarkDom)===null||n===void 0?void 0:n.parentNode)===null||o===void 0||o.removeChild(this.watermarkDom),(d=(s=this.options).onDestroyed)===null||d===void 0||d.call(s)},r.prototype.initConfigData=function(t,e){var a=this;e===void 0&&(e="overwrite"),e==="append"?Object.keys(t).forEach(function(i){a.props&&(a.props[i]=t[i])}):this.props=t,this.options=E(E({},it),this.props),this.changeParentElement(this.options.parent),this.watermarkCanvas=new M(this.props,this.options)},r.prototype.changeParentElement=function(t){if(typeof t=="string"){var e=document.querySelector(t);e&&(this.parentElement=e)}else this.parentElement=t;this.parentElement||console.error("[WatermarkJsPlus]: please pass a valid parent element.")},r.prototype.validateUnique=function(){var t=!0;return Array.from(this.parentElement.childNodes).forEach(function(e){t&&Object.hasOwnProperty.call(e,"__WATERMARK__")&&(t=!1)}),t},r.prototype.validateContent=function(){switch(this.options.contentType){case"image":return Object.hasOwnProperty.call(this.options,"image");case"multi-line-text":case"rich-text":case"text":return this.options.content.length>0}},r.prototype.checkParentElementType=function(){return["html","body"].includes(this.parentElement.tagName.toLocaleLowerCase())?"root":"custom"},r.prototype.checkWatermarkElement=function(){return C(this,void 0,void 0,function(){return _(this,function(t){switch(t.label){case 0:return this.parentElement.contains(this.watermarkDom)?[3,2]:(this.remove(),[4,this.create()]);case 1:t.sent(),t.label=2;case 2:return this.bindCheckWatermarkElementEvent(),[2]}})})},r.prototype.bindMutationObserve=function(){var t=this;this.watermarkDom&&(this.bindCheckWatermarkElementEvent(),this.observer=new MutationObserver(function(e){return C(t,void 0,void 0,function(){return _(this,function(a){switch(a.label){case 0:return e.length>0?(this.remove(),[4,this.create()]):[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})}),this.observer.observe(this.watermarkDom,{attributes:!0,childList:!0,subtree:!0,characterData:!0}),this.parentObserve=new MutationObserver(function(e){return C(t,void 0,void 0,function(){var a,i,n,o;return _(this,function(s){switch(s.label){case 0:a=0,i=e,s.label=1;case 1:return a<i.length?(n=i[a],(n==null?void 0:n.target)===this.watermarkDom||((o=n==null?void 0:n.removedNodes)===null||o===void 0?void 0:o[0])===this.watermarkDom||n.type==="childList"&&n.target===this.parentElement&&n.target.lastChild!==this.watermarkDom?(this.remove(),[4,this.create()]):[3,3]):[3,4];case 2:s.sent(),s.label=3;case 3:return a++,[3,1];case 4:return[2]}})})}),this.parentObserve.observe(this.parentElement,{attributes:!0,childList:!0,subtree:!0,characterData:!0}))},r.prototype.bindCheckWatermarkElementEvent=function(){this.unbindCheckWatermarkElementEvent(),this.checkWatermarkElementRequestID=requestAnimationFrame(this.checkWatermarkElement.bind(this))},r.prototype.unbindCheckWatermarkElementEvent=function(){S(this.checkWatermarkElementRequestID)||cancelAnimationFrame(this.checkWatermarkElementRequestID)},r}();(function(r){Bt(t,r);function t(e){e===void 0&&(e={});var a={globalAlpha:.005,mode:"blind"};return r.call(this,E(E({},e),a))||this}return t.prototype.changeOptions=function(){return C(this,arguments,void 0,function(e,a,i){return e===void 0&&(e={}),a===void 0&&(a="overwrite"),i===void 0&&(i=!0),_(this,function(n){switch(n.label){case 0:return e.globalAlpha=.005,e.mode="blind",this.initConfigData(e,a),$(this.options.monitorProtection),i?(this.remove(),[4,this.create()]):[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.decode=function(e){var a=e.url,i=a===void 0?"":a,n=e.fillColor,o=n===void 0?"#000":n,s=e.compositeOperation,d=s===void 0?"color-burn":s,l=e.mode,c=l===void 0?"canvas":l,h=e.compositeTimes,v=h===void 0?3:h,p=e.onSuccess;if(i&&c==="canvas"){var y=new Image;y.src=i,y.addEventListener("load",function(){var u=y.width,m=y.height,w=M.createCanvas(u,m),g=w.getContext("2d");if(!g)throw new Error("get context error");g.drawImage(y,0,0,u,m),g.globalCompositeOperation=d,g.fillStyle=o;for(var k=0;k<v;k++)g.fillRect(0,0,u,m);var P=nt(w);rt(p)&&(p==null||p(P))})}},t})(ot);const Jt=lt("watermark",()=>{const r=at(),t=dt(),e=ct(),a=T({get(){return Object.assign({contentType:"multi-line-text",content:`Fantastic-admin
当前用户：${t.account}`,fontColor:r.currentColorScheme==="light"?"#000":"#fff",globalAlpha:.1,width:200,height:200},e.value)},set(o){n(o)}}),i=new ot(a.value);D(a,async()=>{r.settings.app.enableWatermark&&await i.check()&&i.changeOptions(a.value)},{deep:!0}),D(()=>r.settings.app.enableWatermark,o=>{o?i.create():i.destroy()},{immediate:!0}),D(()=>r.currentColorScheme,async()=>{r.settings.app.enableWatermark&&await i.check()&&(await ut(),i.changeOptions(a.value))});function n(o={}){e.value=o}return{update:n}}),Qt={class:"wrapper"},Zt={class:"main-container pb-[var(--g-main-container-padding-bottom)]"},te={class:"main"},ee=ht({name:"Layout",__name:"index",setup(r){const t=vt(),e=at(),a=mt(),i=pt();Jt();const n=Rt(),o=T(()=>{let u=Number.parseInt(getComputedStyle(document.documentElement).getPropertyValue("--g-header-height"));return(["single","side","only-side","side-panel"].includes(e.settings.menu.mode)||e.mode==="mobile")&&(u=0),e.mainPageMaximizeStatus&&(u=0),u}),s=T(()=>{let u=Number.parseInt(getComputedStyle(document.documentElement).getPropertyValue("--g-main-sidebar-width"));return e.settings.menu.mode==="single"&&(u=0),["head","only-head","head-panel"].includes(e.settings.menu.mode)&&e.mode!=="mobile"&&(u=0),e.mainPageMaximizeStatus&&(u=0),u}),d=T(()=>{let u=Number.parseInt(getComputedStyle(document.documentElement).getPropertyValue("--g-sub-sidebar-width"));return e.settings.menu.subMenuCollapse&&e.mode!=="mobile"&&(u=Number.parseInt(getComputedStyle(document.documentElement).getPropertyValue("--g-sub-sidebar-collapse-width"))),["only-side","only-head","side-panel","head-panel"].includes(e.settings.menu.mode)&&e.mode!=="mobile"&&(u=0),i.sidebarMenus.every(m=>{var w;return((w=m.meta)==null?void 0:w.menu)===!1})&&(u=0),e.mainPageMaximizeStatus&&(u=0),u}),l=T(()=>{let u=0;e.settings.tabbar.enable&&(u+=Number.parseInt(getComputedStyle(document.documentElement).getPropertyValue("--g-tabbar-height")));const m=e.settings.toolbar.layout.findIndex(g=>g==="->"),w=e.settings.toolbar.layout.some((g,k)=>k<m&&g!=="->"?e.settings.app.routeBaseOn==="filesystem"&&g==="breadcrumb"?!1:e.settings.toolbar[g]:!1);return(!["head","only-head","head-panel"].includes(e.settings.menu.mode)||w)&&(u+=Number.parseInt(getComputedStyle(document.documentElement).getPropertyValue("--g-toolbar-height"))),e.mainPageMaximizeStatus&&(u=0),u}),c=T(()=>!!t.meta.iframe),h=T(()=>!!t.meta.link);D(()=>e.settings.menu.subMenuCollapse,u=>{e.mode==="mobile"&&(u?document.body.classList.remove("overflow-hidden"):document.body.classList.add("overflow-hidden"))}),D(()=>t.path,()=>{e.mode==="mobile"&&e.$patch(u=>{u.settings.menu.subMenuCollapse=!0})}),ft(()=>{K("alt+up,alt+down",(u,m)=>{switch(u.preventDefault(),m.key){case"alt+up":n.maximize(!0);break;case"alt+down":n.maximize(!1);break}})}),gt(()=>{K.unbind("alt+up,alt+down")});let v;function p(){v==null||v(),e.setHoverSidebar(!0)}function y(){v==null||v(),{stop:v}=Pt(()=>{e.setHoverSidebar(!1)},300)}return(u,m)=>{const w=wt,g=yt("RouterView"),k=st;return L(),U("div",{class:"layout",style:kt({"--g-header-actual-height":`${f(o)}px`,"--g-main-sidebar-actual-width":`${f(s)}px`,"--g-sub-sidebar-actual-width":`${f(d)}px`,"--g-topbar-actual-height":`${f(l)}px`})},[O("div",{id:"app-main",class:N({"main-page-maximize":f(e).mainPageMaximizeStatus})},[x(Lt),O("div",Qt,[O("div",{class:N(["sidebar-container",{show:f(e).mode==="mobile"&&!f(e).settings.menu.subMenuCollapse}]),onMouseenter:p,onMouseleave:y},[x(At),x(Dt)],34),O("div",{class:N(["invisible fixed inset-0 z-1009 bg-black/50 op-0 backdrop-blur-sm transition-opacity",{"op-100! visible!":f(e).mode==="mobile"&&!f(e).settings.menu.subMenuCollapse}]),onClick:m[0]||(m[0]=P=>f(e).toggleSidebarCollapse())},null,2),O("div",Zt,[x(Mt),O("div",te,[G(O("div",{class:"exit-main-page-maximize",onClick:m[1]||(m[1]=P=>f(e).setMainPageMaximize())},[x(w,{name:"i-ri:logout-box-line"})],512),[[F,f(e).mainPageMaximizeStatus]]),x(g,null,{default:Q(({Component:P,route:A})=>[x(bt,{name:f(e).settings.mainPage.enableTransition&&!f(e).isReloading?f(e).settings.mainPage.transitionMode:"",mode:"out-in"},{default:Q(()=>[(L(),W(xt,{include:f(a).list},[G((L(),W(Z(P),{key:A.fullPath})),[[F,!(f(c)||f(h))]])],1032,["include"]))]),_:2},1032,["name"])]),_:1}),G(x(Ht,null,null,512),[[F,f(c)&&!f(h)]]),f(h)?(L(),W(It,{key:0})):J("",!0)]),x(k)])])],2),f(e).settings.userPreferences.enable?(L(),W(Wt,{key:0})):J("",!0),x(Tt),(L(),U(St,{key:1},[O("div",{class:"app-setting",onClick:m[2]||(m[2]=P=>f(_t).emit("global-app-setting-toggle"))},[x(w,{name:"i-uiw:setting-o",class:"icon"})]),x(Et)],64)),(L(),W(Z(f(Ot)("free-position"))))],4)}}}),Ze=Ct(ee,[["__scopeId","data-v-30112f04"]]);export{Ze as default};
//# sourceMappingURL=index-B95yDmMm.js.map
