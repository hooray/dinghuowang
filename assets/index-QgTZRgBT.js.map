{"version":3,"file":"index-QgTZRgBT.js","sources":["../../src/ui/components/FaContextMenu/context-menu/ContextMenu.vue","../../src/ui/components/FaContextMenu/context-menu/ContextMenuContent.vue","../../src/ui/components/FaContextMenu/context-menu/ContextMenuGroup.vue","../../src/ui/components/FaContextMenu/context-menu/ContextMenuItem.vue","../../src/ui/components/FaContextMenu/context-menu/ContextMenuLabel.vue","../../src/ui/components/FaContextMenu/context-menu/ContextMenuSeparator.vue","../../src/ui/components/FaContextMenu/context-menu/ContextMenuTrigger.vue","../../src/ui/components/FaContextMenu/index.vue","../../src/layouts/components/Topbar/Tabbar/index.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport type { ContextMenuRootEmits, ContextMenuRootProps } from 'radix-vue'\nimport { ContextMenuRoot, useForwardPropsEmits } from 'radix-vue'\n\nconst props = defineProps<ContextMenuRootProps>()\nconst emits = defineEmits<ContextMenuRootEmits>()\n\nconst forwarded = useForwardPropsEmits(props, emits)\n</script>\n\n<template>\n  <ContextMenuRoot v-bind=\"forwarded\">\n    <slot />\n  </ContextMenuRoot>\n</template>\n","<script setup lang=\"ts\">\nimport type { ContextMenuContentEmits, ContextMenuContentProps } from 'radix-vue'\nimport type { HTMLAttributes } from 'vue'\nimport { cn } from '@/utils'\nimport {\n  ContextMenuContent,\n\n  ContextMenuPortal,\n  useForwardPropsEmits,\n} from 'radix-vue'\nimport { computed } from 'vue'\n\nconst props = defineProps<ContextMenuContentProps & { class?: HTMLAttributes['class'] }>()\nconst emits = defineEmits<ContextMenuContentEmits>()\n\nconst delegatedProps = computed(() => {\n  const { class: _, ...delegated } = props\n\n  return delegated\n})\n\nconst forwarded = useForwardPropsEmits(delegatedProps, emits)\n</script>\n\n<template>\n  <ContextMenuPortal>\n    <ContextMenuContent\n      v-bind=\"forwarded\"\n      :class=\"cn(\n        'z-50 min-w-32 overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2',\n        props.class,\n      )\"\n    >\n      <slot />\n    </ContextMenuContent>\n  </ContextMenuPortal>\n</template>\n","<script setup lang=\"ts\">\nimport type { ContextMenuGroupProps } from 'radix-vue'\nimport { ContextMenuGroup } from 'radix-vue'\n\nconst props = defineProps<ContextMenuGroupProps>()\n</script>\n\n<template>\n  <ContextMenuGroup v-bind=\"props\">\n    <slot />\n  </ContextMenuGroup>\n</template>\n","<script setup lang=\"ts\">\nimport type { ContextMenuItemEmits, ContextMenuItemProps } from 'radix-vue'\nimport type { HTMLAttributes } from 'vue'\nimport { cn } from '@/utils'\nimport {\n  ContextMenuItem,\n\n  useForwardPropsEmits,\n} from 'radix-vue'\nimport { computed } from 'vue'\n\nconst props = defineProps<ContextMenuItemProps & { class?: HTMLAttributes['class'], inset?: boolean }>()\nconst emits = defineEmits<ContextMenuItemEmits>()\n\nconst delegatedProps = computed(() => {\n  const { class: _, ...delegated } = props\n\n  return delegated\n})\n\nconst forwarded = useForwardPropsEmits(delegatedProps, emits)\n</script>\n\n<template>\n  <ContextMenuItem\n    v-bind=\"forwarded\"\n    :class=\"cn(\n      'relative flex cursor-default select-none items-center rounded-sm gap-2 px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50',\n      inset && 'pl-8',\n      props.class,\n    )\"\n  >\n    <slot />\n  </ContextMenuItem>\n</template>\n","<script setup lang=\"ts\">\nimport type { ContextMenuLabelProps } from 'radix-vue'\nimport type { HTMLAttributes } from 'vue'\nimport { cn } from '@/utils'\nimport { ContextMenuLabel } from 'radix-vue'\nimport { computed } from 'vue'\n\nconst props = defineProps<ContextMenuLabelProps & { class?: HTMLAttributes['class'], inset?: boolean }>()\n\nconst delegatedProps = computed(() => {\n  const { class: _, ...delegated } = props\n\n  return delegated\n})\n</script>\n\n<template>\n  <ContextMenuLabel\n    v-bind=\"delegatedProps\"\n    :class=\"\n      cn('px-2 py-1.5 text-sm font-semibold text-foreground',\n         inset && 'pl-8', props.class,\n      )\"\n  >\n    <slot />\n  </ContextMenuLabel>\n</template>\n","<script setup lang=\"ts\">\nimport type { ContextMenuSeparatorProps } from 'radix-vue'\nimport type { HTMLAttributes } from 'vue'\nimport { cn } from '@/utils'\nimport {\n  ContextMenuSeparator,\n\n} from 'radix-vue'\nimport { computed } from 'vue'\n\nconst props = defineProps<ContextMenuSeparatorProps & { class?: HTMLAttributes['class'] }>()\n\nconst delegatedProps = computed(() => {\n  const { class: _, ...delegated } = props\n\n  return delegated\n})\n</script>\n\n<template>\n  <ContextMenuSeparator v-bind=\"delegatedProps\" :class=\"cn('-mx-1 my-1 h-px bg-border', props.class)\" />\n</template>\n","<script setup lang=\"ts\">\nimport type { ContextMenuTriggerProps } from 'radix-vue'\nimport { ContextMenuTrigger, useForwardProps } from 'radix-vue'\n\nconst props = defineProps<ContextMenuTriggerProps>()\n\nconst forwardedProps = useForwardProps(props)\n</script>\n\n<template>\n  <ContextMenuTrigger v-bind=\"forwardedProps\">\n    <slot />\n  </ContextMenuTrigger>\n</template>\n","<script setup lang=\"ts\">\nimport {\n  ContextMenu,\n  ContextMenuContent,\n  ContextMenuGroup,\n  ContextMenuItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuTrigger,\n} from './context-menu'\n\ndefineOptions({\n  name: 'FaContextMenu',\n})\n\nconst props = defineProps<{\n  items: {\n    label: string\n    icon?: string\n    disabled?: boolean\n    hide?: boolean\n    handle?: () => void\n  }[][]\n}>()\n\nconst slots = defineSlots<{\n  default?: () => VNode\n  label?: () => VNode\n}>()\n\nconst myItems = computed(() => {\n  return props.items.map((item) => {\n    return item.filter(v => !v.hide)\n  }).filter(v => v.length)\n})\n\nconst isItemsHasIcon = computed(() => {\n  return myItems.value.some(item => item.some(v => v.icon))\n})\n\nfunction handleItemClick(item: { handle?: () => void }) {\n  item.handle?.()\n}\n</script>\n\n<template>\n  <ContextMenu :modal=\"false\">\n    <ContextMenuTrigger as-child>\n      <slot />\n    </ContextMenuTrigger>\n    <ContextMenuContent class=\"z-1050\">\n      <template v-if=\"!!slots.label\">\n        <ContextMenuLabel>\n          <slot name=\"label\" />\n        </ContextMenuLabel>\n        <ContextMenuSeparator />\n      </template>\n      <template v-for=\"(item, index) in myItems\" :key=\"index\">\n        <ContextMenuGroup>\n          <ContextMenuItem v-for=\"(v, i) in item\" :key=\"i\" :disabled=\"v.disabled\" class=\"cursor-pointer\" @click=\"handleItemClick(v)\">\n            <div v-if=\"isItemsHasIcon\" class=\"size-4 flex-center\">\n              <FaIcon v-if=\"v.icon\" :name=\"v.icon\" class=\"size-4\" />\n            </div>\n            {{ v.label }}\n          </ContextMenuItem>\n        </ContextMenuGroup>\n        <ContextMenuSeparator v-if=\"index !== myItems.length - 1\" />\n      </template>\n    </ContextMenuContent>\n  </ContextMenu>\n</template>\n","<i18n lang=\"yaml\">\nzh-cn:\n  reload: 重新加载\n  close: 关闭标签页\n  pin: 固定\n  unpin: 取消固定\n  maximize: 最大化\n  newWindow: 新窗口中打开\n  closeOtherSide: 关闭其它标签页\n  closeLeftSide: 关闭左侧标签页\n  closeRightSide: 关闭右侧标签页\nzh-tw:\n  reload: 重新加載\n  close: 關閉標籤頁\n  pin: 固定\n  unpin: 取消固定\n  maximize: 最大化\n  newWindow: 新窗口中打開\n  closeOtherSide: 關閉其它標籤頁\n  closeLeftSide: 關閉左側標籤頁\n  closeRightSide: 關閉右側標籤頁\nen:\n  reload: Reload\n  close: Close\n  pin: Pin\n  unpin: Unpin\n  maximize: Maximize\n  newWindow: Open In New Window\n  closeOtherSide: Close Otherside Tabs\n  closeLeftSide: Close Leftside Tabs\n  closeRightSide: Close Rightside Tabs\n</i18n>\n\n<script setup lang=\"ts\">\nimport type { Tabbar } from '#/global'\nimport { useSlots } from '@/slots'\nimport useSettingsStore from '@/store/modules/settings'\nimport useTabbarStore from '@/store/modules/tabbar'\nimport storage from '@/utils/storage'\nimport { useMagicKeys } from '@vueuse/core'\nimport hotkeys from 'hotkeys-js'\nimport Sortable from 'sortablejs'\nimport { useI18n } from 'vue-i18n'\nimport { toast } from 'vue-sonner'\nimport MoreAction from './moreAction.vue'\n\ndefineOptions({\n  name: 'Tabbar',\n})\n\nconst route = useRoute()\nconst router = useRouter()\n\nconst settingsStore = useSettingsStore()\nconst tabbarStore = useTabbarStore()\n\nconst tabbar = useTabbar()\nconst mainPage = useMainPage()\n\nconst keys = useMagicKeys({ reactive: true })\n\nconst { t } = useI18n()\nconst { generateI18nTitle } = useMenu()\n\nconst activedTabId = computed(() => tabbar.getId())\nconst isShowMoreAction = computed(() => tabbarStore.list.length > 1 && (tabbar.checkCloseOtherSide() || tabbar.checkCloseLeftSide() || tabbar.checkCloseRightSide()))\n\nconst tabsRef = useTemplateRef('tabsRef')\nconst tabContainerRef = useTemplateRef('tabContainerRef')\nconst tabRef = useTemplateRef<HTMLElement[]>('tabRef')\n\nconst activePseudoTabStart = computed(() => {\n  const index = tabbarStore.list.findIndex(item => item.tabId === activedTabId.value)\n  return `${tabRef.value?.find(item => Number.parseInt(item.dataset.index!) === index)?.offsetLeft || 0}px`\n})\nconst activePseudoTabWidth = computed(() => {\n  const index = tabbarStore.list.findIndex(item => item.tabId === activedTabId.value)\n  return `${tabRef.value?.find(item => Number.parseInt(item.dataset.index!) === index)?.offsetWidth || 0}px`\n})\n\nconst isDragging = ref(false)\nlet tabSortable: Sortable\nonMounted(() => {\n  tabSortable = new Sortable(tabContainerRef.value?.$el, {\n    animation: 200,\n    ghostClass: 'opacity-0',\n    draggable: '.tab',\n    handle: '.drag-handle',\n    onStart: () => {\n      isDragging.value = true\n    },\n    onEnd: () => {\n      isDragging.value = false\n    },\n    onMove: (e) => {\n      return e.dragged.classList.contains('pinned') ? e.related.classList.contains('pinned') : !e.related.classList.contains('pinned')\n    },\n    onUpdate: (e) => {\n      if (e.newIndex !== undefined && e.oldIndex !== undefined) {\n        tabbarStore.sort(e.newIndex, e.oldIndex)\n      }\n    },\n  })\n})\nwatch([\n  () => settingsStore.mode,\n  () => settingsStore.settings.app.direction,\n], (val) => {\n  nextTick(() => {\n    tabSortable?.option('disabled', val[0] === 'mobile' || val[1] === 'rtl')\n  })\n}, {\n  immediate: true,\n})\n\nwatch(() => route, (val) => {\n  if (settingsStore.settings.tabbar.enable) {\n    tabbarStore.add(val).then(() => {\n      const index = tabbarStore.list.findIndex(item => item.tabId === activedTabId.value)\n      if (index !== -1) {\n        tabRef.value && tabsRef.value?.scrollTo(tabRef.value[index].offsetLeft - tabsRef.value.ref?.$el.clientWidth * 0.4)\n        tabbarScrollTip()\n      }\n    })\n  }\n}, {\n  immediate: true,\n  deep: true,\n})\n\nfunction tabbarScrollTip() {\n  if (tabContainerRef.value?.$el.clientWidth > (tabsRef.value?.ref?.$el.clientWidth ?? 0) && !storage.local.has('tabbarScrollTip')) {\n    storage.local.set('tabbarScrollTip', '')\n    const tips = toast.info('温馨提示', {\n      description: '标签栏数量超过展示区域范围，可以将鼠标移到标签栏上，通过鼠标滚轮滑动浏览',\n      position: 'top-center',\n      duration: Infinity,\n      action: {\n        label: '知道了',\n        onClick: () => toast.dismiss(tips),\n      },\n    })\n  }\n}\nfunction onTabbarDblclick(routeItem: Tabbar.recordRaw) {\n  switch (settingsStore.settings.tabbar.dblclickAction) {\n    case 'reload':\n      mainPage.reload()\n      break\n    case 'close':\n      tabbar.closeById(routeItem.tabId)\n      break\n    case 'pin':\n      if (routeItem.isPin) {\n        tabbarStore.unPin(routeItem.tabId)\n      }\n      else {\n        tabbarStore.pin(routeItem.tabId)\n      }\n      break\n    case 'maximize':\n      settingsStore.setMainPageMaximize()\n      break\n    case 'window':\n      window.open(router.resolve(routeItem.fullPath).href, '_blank')\n      break\n  }\n}\nfunction contextMenuItems(routeItem: Tabbar.recordRaw) {\n  return [\n    [\n      {\n        label: t('reload'),\n        icon: 'i-ri:refresh-line',\n        disabled: routeItem.tabId !== activedTabId.value,\n        handle: () => mainPage.reload(),\n      },\n      {\n        label: t('close'),\n        icon: 'i-ri:close-line',\n        disabled: !tabbar.checkClose(routeItem.tabId),\n        handle: () => tabbar.closeById(routeItem.tabId),\n      },\n    ],\n    [\n      {\n        label: routeItem.isPin ? t('unpin') : t('pin'),\n        icon: routeItem.isPin ? 'i-lucide:pin-off' : 'i-lucide:pin',\n        // 主页不允许被固定，因为如果固定主页且主页未启用，会导致登录时进入路由死循环状态\n        disabled: routeItem.fullPath === settingsStore.settings.home.fullPath || routeItem.isPermanent,\n        handle: () => routeItem.isPin ? tabbarStore.unPin(routeItem.tabId) : tabbarStore.pin(routeItem.tabId),\n      },\n      {\n        label: t('maximize'),\n        icon: 'i-ri:picture-in-picture-exit-line',\n        handle: () => {\n          if (routeItem.tabId !== activedTabId.value) {\n            router.push(routeItem.fullPath)\n          }\n          settingsStore.setMainPageMaximize()\n        },\n      },\n      {\n        label: t('newWindow'),\n        icon: 'i-ci:window',\n        handle: () => {\n          window.open(router.resolve(routeItem.fullPath).href, '_blank')\n        },\n      },\n    ],\n    [\n      {\n        label: t('closeOtherSide'),\n        disabled: !tabbar.checkCloseOtherSide(routeItem.tabId),\n        handle: () => {\n          tabbar.closeOtherSide(routeItem.tabId)\n        },\n      },\n      {\n        label: t('closeLeftSide'),\n        disabled: !tabbar.checkCloseLeftSide(routeItem.tabId),\n        handle: () => {\n          tabbar.closeLeftSide(routeItem.tabId)\n        },\n      },\n      {\n        label: t('closeRightSide'),\n        disabled: !tabbar.checkCloseRightSide(routeItem.tabId),\n        handle: () => {\n          tabbar.closeRightSide(routeItem.tabId)\n        },\n      },\n    ],\n  ]\n}\n\nfunction iconName(isActive: boolean, icon: Tabbar.recordRaw['icon'], activeIcon: Tabbar.recordRaw['activeIcon']) {\n  let name\n  if ((!isActive && icon) || (isActive && !activeIcon)) {\n    name = icon\n  }\n  else if (isActive && activeIcon) {\n    name = activeIcon\n  }\n  return name\n}\n\nonMounted(() => {\n  hotkeys('alt+left,alt+right,alt+w,alt+1,alt+2,alt+3,alt+4,alt+5,alt+6,alt+7,alt+8,alt+9,alt+0', (e, handle) => {\n    if (settingsStore.settings.tabbar.enable && settingsStore.settings.tabbar.enableHotkeys) {\n      e.preventDefault()\n      switch (handle.key) {\n        // 切换到当前标签页紧邻的上一个标签页\n        case 'alt+left':\n          if (tabbarStore.list[0].tabId !== activedTabId.value) {\n            const index = tabbarStore.list.findIndex(item => item.tabId === activedTabId.value)\n            router.push(tabbarStore.list[index - 1].fullPath)\n          }\n          break\n        // 切换到当前标签页紧邻的下一个标签页\n        case 'alt+right':\n          if (tabbarStore.list.at(-1)?.tabId !== activedTabId.value) {\n            const index = tabbarStore.list.findIndex(item => item.tabId === activedTabId.value)\n            router.push(tabbarStore.list[index + 1].fullPath)\n          }\n          break\n        // 关闭当前标签页\n        case 'alt+w':\n          tabbar.closeById(activedTabId.value)\n          break\n        // 切换到第 n 个标签页\n        case 'alt+1':\n        case 'alt+2':\n        case 'alt+3':\n        case 'alt+4':\n        case 'alt+5':\n        case 'alt+6':\n        case 'alt+7':\n        case 'alt+8':\n        case 'alt+9':\n        {\n          const number = Number(handle.key.split('+')[1])\n          tabbarStore.list[number - 1]?.fullPath && router.push(tabbarStore.list[number - 1].fullPath)\n          break\n        }\n        // 切换到最后一个标签页\n        case 'alt+0':\n          router.push(tabbarStore.list[tabbarStore.list.length - 1].fullPath)\n          break\n      }\n    }\n  })\n})\nonUnmounted(() => {\n  hotkeys.unbind('alt+left,alt+right,alt+w,alt+1,alt+2,alt+3,alt+4,alt+5,alt+6,alt+7,alt+8,alt+9,alt+0')\n})\n</script>\n\n<template>\n  <div class=\"tabbar\">\n    <component :is=\"useSlots('tabbar-start')\" />\n    <div class=\"tabbar-container\">\n      <FaScrollArea\n        ref=\"tabsRef\" horizontal :scrollbar=\"false\" mask gradient-color=\"var(--g-tabbar-bg)\" class=\"tabs\" :class=\"{\n          'tabs-ontop': settingsStore.settings.topbar.switchTabbarAndToolbar,\n          [`tabs-${settingsStore.settings.tabbar.style}`]: settingsStore.settings.tabbar.style !== '',\n        }\"\n      >\n        <TransitionGroup ref=\"tabContainerRef\" :name=\"!isDragging ? 'tabbar' : undefined\" tag=\"div\" class=\"tab-container\" :class=\"{ dragging: isDragging }\">\n          <div\n            v-for=\"(element, index) in tabbarStore.list\" :key=\"settingsStore.settings.tabbar.mergeTabsBy === 'routeName' && element.routeName ? element.routeName : element.tabId\"\n            ref=\"tabRef\" :data-index=\"index\" class=\"tab\" :class=\"{\n              'tab-ontop': settingsStore.settings.topbar.switchTabbarAndToolbar,\n              'actived': element.tabId === activedTabId,\n              'pinned': element.isPermanent || element.isPin,\n            }\" @click=\"router.push(element.fullPath)\" @dblclick=\"onTabbarDblclick(element)\"\n          >\n            <FaContextMenu :items=\"contextMenuItems(element)\">\n              <div class=\"size-full\">\n                <div class=\"tab-dividers\" />\n                <div class=\"tab-background\" />\n                <FaTooltip :delay=\"1000\" side=\"bottom\">\n                  <div class=\"tab-content\">\n                    <div :key=\"element.tabId\" class=\"title\">\n                      <FaIcon v-if=\"settingsStore.settings.tabbar.enableIcon && iconName(element.tabId === activedTabId, element.icon, element.activeIcon)\" :name=\"iconName(element.tabId === activedTabId, element.icon, element.activeIcon)!\" class=\"icon\" />\n                      {{ element.customTitleList.find(item => item.fullPath === element.fullPath)?.title || generateI18nTitle(element.title) }}\n                    </div>\n                    <div v-if=\"!element.isPermanent && element.isPin\" class=\"action-icon\" @click.stop=\"tabbarStore.unPin(element.tabId)\" @dblclick.stop>\n                      <FaIcon name=\"i-ri:pushpin-2-fill\" />\n                    </div>\n                    <div v-else-if=\"!element.isPermanent && tabbarStore.list.length > 1\" class=\"action-icon\" @click.stop=\"tabbar.closeById(element.tabId)\" @dblclick.stop>\n                      <FaIcon name=\"i-ri:close-fill\" />\n                    </div>\n                    <div v-show=\"keys.alt && index < 9\" class=\"hotkey-number\">\n                      {{ index + 1 }}\n                    </div>\n                    <div class=\"drag-handle\" />\n                  </div>\n                  <template #content>\n                    <div class=\"text-sm\">\n                      {{ element.customTitleList.find(item => item.fullPath === element.fullPath)?.title || generateI18nTitle(element.title) }}\n                    </div>\n                    <div class=\"text-accent-foreground/50\">\n                      {{ element.fullPath }}\n                    </div>\n                  </template>\n                </FaTooltip>\n              </div>\n            </FaContextMenu>\n          </div>\n        </TransitionGroup>\n      </FaScrollArea>\n      <MoreAction v-if=\"isShowMoreAction\" class=\"absolute end-0 top-0 z-10 h-full w-50px flex-center\" />\n    </div>\n    <component :is=\"useSlots('tabbar-end')\" />\n  </div>\n</template>\n\n<style scoped>\n.tabbar {\n  position: relative;\n  display: flex;\n  align-items: center;\n  height: var(--g-tabbar-height);\n  background-color: var(--g-tabbar-bg);\n  transition: background-color 0.3s, box-shadow 0.3s;\n\n  .dark & {\n    box-shadow: 0 1px 0 0 hsl(var(--border)), 0 -1px 0 0 hsl(var(--border));\n  }\n\n  .tabbar-container {\n    position: relative;\n    flex: 1;\n    height: 100%;\n\n    .tabs {\n      position: absolute;\n      inset-inline: 0;\n      margin-inline-end: 50px;\n      white-space: nowrap;\n\n      &.tabs-ontop {\n        top: 0 !important;\n        bottom: inherit !important;\n      }\n\n      .tab-container {\n        position: relative;\n        display: inline-block;\n\n        &::after {\n          position: absolute;\n          bottom: 0;\n          left: v-bind(activePseudoTabStart);\n          z-index: 10;\n          width: v-bind(activePseudoTabWidth);\n          content: \"\";\n          transition: width 0.3s, left 0.3s;\n        }\n\n        &:not(.dragging) {\n          .tab {\n            &:not(.actived):hover {\n              z-index: 3;\n\n              &::before,\n              &::after {\n                content: none;\n              }\n\n              & + .tab .tab-dividers::before {\n                opacity: 0;\n              }\n\n              .tab-content {\n                .title,\n                .action-icon {\n                  color: var(--g-tabbar-tab-hover-color);\n                }\n              }\n\n              .tab-background {\n                background-color: var(--g-tabbar-tab-hover-bg);\n              }\n            }\n          }\n        }\n\n        .tab {\n          position: relative;\n          display: inline-block;\n          min-width: var(--g-tabbar-tab-min-width);\n          max-width: var(--g-tabbar-tab-max-width);\n          height: var(--g-tabbar-height);\n          font-size: 14px;\n          line-height: calc(var(--g-tabbar-height) - 2px);\n          vertical-align: bottom;\n          pointer-events: none;\n          cursor: pointer;\n\n          * {\n            user-select: none;\n          }\n\n          & + .tab:hover,\n          & + .tab.actived {\n            .tab-dividers::before {\n              opacity: 0;\n            }\n          }\n\n          &.actived {\n            z-index: 5;\n\n            &::before,\n            &::after {\n              content: none;\n            }\n\n            & + .tab .tab-dividers::before {\n              opacity: 0;\n            }\n\n            .tab-content {\n              .title,\n              .action-icon {\n                color: var(--g-tabbar-tab-active-color);\n              }\n            }\n\n            .tab-background {\n              background-color: var(--g-tabbar-tab-active-bg);\n            }\n          }\n\n          .tab-dividers {\n            position: absolute;\n            inset-inline: -1px;\n            top: 50%;\n            z-index: 0;\n            height: 14px;\n            transform: translateY(-50%);\n\n            &::before {\n              position: absolute;\n              inset-inline-start: 1px;\n              top: 0;\n              bottom: 0;\n              display: block;\n              width: 1px;\n              content: \"\";\n              background-color: var(--g-tabbar-dividers-bg);\n              opacity: 1;\n              transition: opacity 0.3s, background-color 0.3s;\n            }\n          }\n\n          &:first-child .tab-dividers::before {\n            opacity: 0;\n          }\n\n          .tab-background {\n            position: absolute;\n            top: 0;\n            left: 0;\n            z-index: 0;\n            width: 100%;\n            height: 100%;\n            pointer-events: none;\n            transition: opacity 0.3s, background-color 0.3s;\n          }\n\n          .tab-content {\n            display: flex;\n            width: 100%;\n            height: 100%;\n            pointer-events: all;\n\n            .title {\n              display: flex;\n              flex: 1;\n              gap: 5px;\n              align-items: center;\n              height: 100%;\n              padding: 0 10px;\n              margin-inline-end: 10px;\n              overflow: hidden;\n              color: var(--g-tabbar-tab-color);\n              white-space: nowrap;\n              mask-image: linear-gradient(to right, #000 calc(100% - 20px), transparent);\n              transition: margin-inline-end 0.3s;\n\n              [dir=\"rtl\"] & {\n                mask-image: linear-gradient(to left, #000 calc(100% - 20px), transparent);\n              }\n\n              &:has(+ .action-icon) {\n                margin-inline-end: 28px;\n              }\n\n              .icon {\n                flex-shrink: 0;\n              }\n            }\n\n            .action-icon {\n              --uno: transition absolute inset-e-2 top-1/2 -translate-y-1/2 rounded-full z-10 w-5 h-5 flex-center text-xs \"text-[var(--g-tabbar-tab-color)]\" hover:border hover:bg-secondary;\n            }\n\n            .hotkey-number {\n              --uno: border bg-secondary absolute inset-e-2 top-1/2 -translate-y-1/2 rounded-full z-10 w-5 h-5 flex-center text-xs \"text-[var(--g-tabbar-tab-color)]\";\n            }\n\n            .drag-handle {\n              position: absolute;\n              inset: 0;\n              z-index: 9;\n            }\n          }\n        }\n      }\n\n      &.tabs-fashion {\n        bottom: 0;\n\n        .tab-container {\n          &:not(.dragging) {\n            .tab:not(.actived):hover {\n              .tab-background {\n                &::before,\n                &::after {\n                  background-color: var(--g-tabbar-tab-hover-bg);\n                }\n              }\n            }\n          }\n\n          .tab {\n            height: calc(var(--g-tabbar-height) - 6px);\n            margin-inline: 6px -6px;\n            line-height: calc(var(--g-tabbar-height) - 8px);\n\n            &:last-child {\n              margin-inline-end: 0;\n            }\n\n            &.tab-ontop .tab-background {\n              transform: rotate(180deg);\n            }\n\n            .tab-background {\n              border-radius: 10px 10px 0 0;\n\n              &::before,\n              &::after {\n                position: absolute;\n                bottom: 0;\n                width: 10px;\n                height: 10px;\n                content: \"\";\n                background-color: transparent;\n                mask-size: 10px;\n                transition: background-color 0.3s;\n              }\n\n              &::before {\n                left: -10px;\n                mask-image: url(\"data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M0 100c55.228 0 100-44.772 100-100v100H0z' fill='%23F8EAE7'/%3E%3C/svg%3E\");\n              }\n\n              &::after {\n                right: -10px;\n                mask-image: url(\"data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M100 100C44.772 100 0 55.228 0 0v100h100z' fill='%23F8EAE7'/%3E%3C/svg%3E\");\n              }\n            }\n\n            &.actived {\n              .tab-background {\n                &::before,\n                &::after {\n                  background-color: var(--g-tabbar-tab-active-bg);\n                }\n              }\n            }\n          }\n        }\n      }\n\n      &.tabs-card {\n        .tab-container {\n          .tab {\n            height: calc(var(--g-tabbar-height) - 10px);\n            margin: 5px 0 5px 5px;\n\n            .tab-dividers {\n              display: none;\n            }\n\n            .tab-background {\n              border-radius: 5px;\n            }\n          }\n        }\n      }\n\n      &.tabs-square {\n        .tab-container {\n          &::after {\n            height: 2px;\n\n            --uno: bg-primary;\n          }\n\n          &:has(> .tab.tab-ontop) {\n            &::after {\n              top: 0;\n              bottom: unset;\n            }\n\n            .tab {\n              .tab-background {\n                top: 0;\n                bottom: unset;\n              }\n            }\n          }\n\n          .tab {\n            &:not(.actived):hover {\n              .tab-background {\n                height: 100%;\n              }\n            }\n\n            .tab-background {\n              top: unset;\n              bottom: 0;\n              height: 0;\n              background-color: var(--g-tabbar-tab-hover-bg);\n              transition: height 0.3s;\n            }\n\n            &.actived {\n              .tab-background {\n                height: 100%;\n                background-color: var(--g-tabbar-tab-active-bg);\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n\n/* 标签栏动画 */\n.tabs {\n  .tabbar-move,\n  .tabbar-enter-active,\n  .tabbar-leave-active {\n    transition: all 0.3s;\n  }\n\n  .tabbar-enter-from,\n  .tabbar-leave-to {\n    opacity: 0;\n    transform: translateY(30px);\n  }\n\n  &.tabs-ontop {\n    .tabbar-enter-from,\n    .tabbar-leave-to {\n      opacity: 0;\n      transform: translateY(-30px);\n    }\n  }\n\n  .tabbar-leave-active {\n    position: absolute !important;\n  }\n}\n</style>\n"],"names":["forwarded","useForwardPropsEmits","__props","__emit","props","emits","delegatedProps","computed","_","delegated","forwardedProps","useForwardProps","slots","_useSlots","myItems","item","v","isItemsHasIcon","handleItemClick","_a","route","useRoute","router","useRouter","settingsStore","useSettingsStore","tabbarStore","useTabbarStore","tabbar","useTabbar","mainPage","useMainPage","keys","useMagicKeys","t","useI18n","generateI18nTitle","useMenu","activedTabId","isShowMoreAction","tabsRef","useTemplateRef","tabContainerRef","tabRef","activePseudoTabStart","index","_b","activePseudoTabWidth","isDragging","ref","tabSortable","onMounted","Sortable","e","watch","val","nextTick","tabbarScrollTip","_c","storage","tips","toast","onTabbarDblclick","routeItem","contextMenuItems","iconName","isActive","icon","activeIcon","name","hotkeys","handle","number","onUnmounted"],"mappings":"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"}